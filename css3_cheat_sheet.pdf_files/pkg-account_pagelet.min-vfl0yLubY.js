define("modules/clean/account_page/account_page",["require","exports","tslib","external/react","external/redux","external/react-redux","external/redux-thunk","external/mcl/tabbed_header","modules/core/browser","modules/core/i18n","modules/core/exception","modules/clean/react/maestro/header","modules/clean/react/maestro/layout","modules/clean/react/css","modules/clean/history","modules/clean/viewer","modules/clean/account_page/tabs/lib","modules/clean/account_page/reducer","modules/clean/account_page/components/sidebar","modules/clean/account_page/util"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,_,m,f,h,y,b,g){"use strict";function v(e){return"personal"===e.role?l._("Personal account"):f.get_viewer().team_name?l._("%(team_name)s account").format({team_name:f.get_viewer().team_name}):l._("Work account")}Object.defineProperty(t,"__esModule",{value:!0});var E=a.createStore(y.rootReducer,a.applyMiddleware(o)),S=(function(e){function t(){var t=e.call(this)||this;t.onTabSelected=function(e){t.setState({activeTab:e});var n=h.getTabFromId(e);n||u.assert(!1,e+" is not a valid tab"),m.push_state("/account/"+n.id)},t.getTabContent=function(){return h.getTabFromId(t.state.activeTab).view},t.getSideBar=function(){var e=h.getTabFromId(t.state.activeTab);if(e&&e.sidebar)return r.createElement(b.Sidebar,{content:e.sidebar.content})};var n=g.getCurrentUser(),a=h.getTabFromUrlPath(c.get_uri().getPath()),i=a||h.getDefaultTab(n);return t.state={user:n,activeTab:i.id},t}return n.__extends(t,e),t.prototype.render=function(){var e=this;return r.createElement(p.MaestroChrome,{user:this.state.user,titleRegion:r.createElement(d.MaestroHeaderTitle,null,v(this.state.user)),embeddedAppRegion:r.createElement(i.Provider,{store:E},r.createElement("div",{className:"account-page"},r.createElement(s.TabbedHeader,{onSelection:this.onTabSelected},h.getTabs(this.state.user).map(function(t){return r.createElement(s.Tab,{key:t.id,active:e.state.activeTab===t.id,id:t.id},t.displayName)})),this.getTabContent())),actionSidebarRegion:this.getSideBar()})},t})(r.Component);t.AccountPage=_(S,["/static/css/mcl/index-vfl3F-owF.css","/static/css/account/pagelet/index-vflK65iVR.css"])}),define("modules/clean/account_page/components/account_table",["require","exports","tslib","external/react","external/classnames"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BodyCell=function(e){var t=e.className,i=n.__rest(e,["className"]),o=a("account-maestro-table__body-cell",t);return r.createElement("td",n.__assign({className:o},i))},t.HeaderCell=function(e){var t=e.className,i=n.__rest(e,["className"]),o=a("account-maestro-table__header-cell",t);return r.createElement("th",n.__assign({className:o},i))},t.BodyRow=function(e){var t=e.className,i=n.__rest(e,["className"]),o=a("account-maestro-table__body-row",t);return r.createElement("tr",n.__assign({className:o},i))},t.HeaderRow=function(e){var t=e.className,i=n.__rest(e,["className"]),o=a("account-maestro-table__header-row",t);return r.createElement("tr",n.__assign({className:o},i))},t.TableHead=function(e){return r.createElement("thead",n.__assign({},e))},t.TableBody=function(e){return r.createElement("tbody",n.__assign({},e))},t.Table=function(e){var t=e.className,i=n.__rest(e,["className"]),o=a("account-maestro-table",t);return r.createElement("div",{className:"account-maestro-table-container"},r.createElement("table",n.__assign({className:o},i)))}}),define("modules/clean/account_page/components/button_block",["require","exports","tslib","external/react","external/mcl/button","external/mcl/tertiary_link","modules/clean/react/css"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e="link"===this.props.buttonAction.kind?this.props.buttonAction.href:void 0,t={className:"account-button-block__button",onClick:"function"===this.props.buttonAction.kind?this.props.buttonAction.handler:void 0,disabled:this.props.disabled},o="secondary"===this.props.kind?r.createElement(a.Button,n.__assign({},t,{variant:"secondary"}),this.props.buttonText):r.createElement("a",{href:e},r.createElement(i.TertiaryLink,n.__assign({},t),this.props.buttonText));return r.createElement("div",{className:"account-page-module account-button-block"},r.createElement("div",{className:"account-button-block__label"},r.createElement("span",{className:"account-page-block__heading"},this.props.label),!!this.props.subtext&&r.createElement("span",{className:"account-page-block__subtext"},this.props.subtext)),o)},t})(r.Component);t.ButtonBlock=o(s,["/static/css/account/pagelet/index-vflK65iVR.css","/static/css/mcl/index-vfl3F-owF.css"])}),define("modules/clean/account_page/components/key_value_block",["require","exports","tslib","external/react","modules/clean/react/css","external/mcl/tertiary_link"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-module account-key-value-block"},r.createElement("span",{className:"account-key-value-block__key"},this.props.keyText),r.createElement("span",{className:"account-key-value-block__value"},this.props.valueText),r.createElement(i.TertiaryLink,{className:"account-key-value-block__link",onClick:this.props.onLinkClick},this.props.linkText))},t})(r.Component);t.KeyValueBlock=a(o,["/static/css/account/pagelet/index-vflK65iVR.css"])}),define("modules/clean/account_page/components/sidebar",["require","exports","tslib","external/react","modules/clean/react/css"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"appactions-menu"},r.createElement("div",{className:"appactions-menu--buttons"},r.createElement("div",{className:"primary-action-menu"},r.createElement("span",{className:"primary-action-menu__header-text"}),r.createElement("div",{className:"primary-action-menu__button-wrapper"},r.createElement("button",{className:"primary-action-menu__button mc-button mc-button-primary"},r.createElement("span",{className:"mc-button-content ue-effect-container"},this.props.content))))))},t})(r.Component);t.Sidebar=a(i,["/static/css/dropbox/app_actions-vflt3Wz8h.css"])}),define("modules/clean/account_page/reducer",["require","exports","external/redux","modules/clean/account_page/widgets/billing/reducers","modules/clean/account_page/widgets/email_notifications/reducers","modules/clean/account_page/widgets/plan/reducers","modules/clean/account_page/widgets/connected_services/reducers","modules/clean/account_page/widgets/mobile_contacts/reducers"],function(e,t,n,r,a,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=n.combineReducers({billingInfo:r.billingInfoReducer,connectedServices:o.connectedServicesReducer,emailNotifications:a.emailNotificationsReducer,mobileContacts:s.mobileContactsReducer,planTab:i.planTabReducer})}),define("modules/clean/account_page/tabs/billing",["require","exports","tslib","modules/clean/payments/billing_info_modal","modules/clean/dbmodal","modules/clean/deprecated/dbmodal_loading","external/react","external/react-redux","modules/clean/react/css","modules/core/i18n","modules/clean/teams/admin/widgets/billing_history/billing_history_table","modules/clean/teams/admin/lib/billing_history","modules/clean/account_page/components/key_value_block","modules/clean/account_page/widgets/billing/action_creators","modules/constants/show_edit_invoice_modal"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){return{billingInfo:e.billingInfo.billingInfo}},h=function(e){return{loadBillingInfo:function(t){return void 0===t&&(t=!1),e(_.loadDataIfNecessary(t))}}},y=(function(e){function t(t){var n=e.call(this,t)||this;return n.handlePaymentUpdate=n.handlePaymentUpdate.bind(n),n.handleBillingChange=n.handleBillingChange.bind(n),a.DBModalStack.register(r.BILLING_INFO_UPDATED,function(){n.props.loadBillingInfo(!0)}),n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.loadBillingInfo()},t.prototype.handlePaymentUpdate=function(){a.DBModalStack.push(new i({element_id:"update_billing_info",endpoint_url:"/billing_info_modal",html_in_error_msg:!0,parameters:{}}))},t.prototype.handleBillingChange=function(){},t.prototype.buildPaymentDescription=function(e,t){return null===t?e:l._("%(payment_description)s, exp: %(expiration_date)s").format({payment_description:e,expiration_date:t,comment:'Payment description is a card information, already translated           (ex> Visa ending in 2543). Date is in format MM / YYYY ( ex> 08 / 2017 ).           An example translated string is "Visa ending in 2543, exp: 08 / 2017 ).'})},t.prototype.buildBillingDescription=function(e){return null===e?"":l._("Plan billed %(period)s").format({period:e})},t.prototype.buildBillingHistoryIfNecessary=function(e,t){if(null!==e){var n=d.getHistoryData(e);return o.createElement("div",{className:"billing-table-container"},o.createElement(u.BillingHistoryTable,{billingHistoryRecords:n,amountLabel:l._("Amount"),displayNoTransactionsOnEmptyRecords:!1,showEditInvoiceModal:m.SHOW_EDIT_INVOICE_MODAL,footer:this.buildFooterIfNecessary(t)}))}},t.prototype.buildFooterIfNecessary=function(e){if(e)return o.createElement("tr",{className:"billing-history-row"},o.createElement("td",{colSpan:4,className:"billing-history-col"},o.createElement("a",{href:"/payments"},l._("View all billing history"))))},t.prototype.render=function(){var e=this.props.billingInfo,t=e.description,n=e.expiration_date,r=e.period,a=e.transactions,i=e.has_more;return o.createElement("div",{className:"account-page-tab"},o.createElement(p.KeyValueBlock,{keyText:l._("Payment method"),valueText:this.buildPaymentDescription(t,n),linkText:l._("Update"),onLinkClick:this.handlePaymentUpdate}),o.createElement(p.KeyValueBlock,{keyText:l._("Billing period"),valueText:this.buildBillingDescription(r),linkText:l._("Change"),onLinkClick:this.handleBillingChange}),o.createElement("div",{className:"account-page-block"},o.createElement("span",{className:"account-page-block__heading"},l._("Billing history")),o.createElement("p",{className:"account-page-block__subtext"},l._("View invoices and receipts for all payments made on your Dropbox account.")),this.buildBillingHistoryIfNecessary(a,i)))},t})(o.Component),b=s.connect(f,h)(y);t.BillingTab=c(b,["/static/css/account/pagelet/billing_tab-vfldj_oEY.css"])}),define("modules/clean/account_page/tabs/connected_apps",["require","exports","tslib","external/react","modules/clean/account_page/widgets/connected_services/view","modules/clean/account_page/widgets/linked_apps/view","modules/clean/account_page/widgets/mobile_contacts/view"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-tab"},r.createElement(a.ConnectedServices,null),r.createElement(o.MobileContacts,null),r.createElement(i.LinkedApps,null))},t})(r.Component);t.ConnectedAppsTab=s}),define("modules/clean/account_page/tabs/general",["require","exports","tslib","external/react","modules/clean/account_page/widgets/delete_account/view"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-tab"},r.createElement(a.DeleteAccountRow,null))},t})(r.Component);t.GeneralTab=i}),define("modules/clean/account_page/tabs/lib",["require","exports","modules/clean/account_page/tabs/tab_definitions"],function(e,t,n){"use strict";function r(e){var t={};return s.forEach(function(e){t[e.id]=e}),t[e]}function a(e){var t=e.replace(/^\//,"").replace(/$\//,"").split("/");if(!(t.length<2)){var n=t[1],a=r(n);return a?a:void 0}}function i(e){return n.GENERAL}function o(e){return s.filter(function(t){return!t.skipIf||!t.skipIf(e)})}Object.defineProperty(t,"__esModule",{value:!0});var s=[n.GENERAL,n.PLAN,n.BILLING,n.SECURITY,n.NOTIFICATIONS,n.CONNECTED_APPS];t.getTabFromId=r,t.getTabFromUrlPath=a,t.getDefaultTab=i,t.getTabs=o}),define("modules/clean/account_page/tabs/notifications",["require","exports","tslib","external/react","modules/clean/account_page/widgets/email_notifications/view"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement(a.EmailNotifications,null))},t})(r.Component);t.NotificationsTab=i}),define("modules/clean/account_page/tabs/plan",["require","exports","tslib","external/react","modules/clean/account_page/widgets/plan/views/plan_container"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement(a.PlanContainer,null)},t})(r.Component);t.PlanTab=i}),define("modules/clean/account_page/tabs/security",["require","exports","tslib","external/react","modules/clean/account_page/widgets/security_upsell/view","modules/clean/account_page/widgets/security_checkup/view","modules/clean/account_page/widgets/paper_unlink/view"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement(a.SecurityUpsellBanner,null),r.createElement(i.SecurityCheckup,null),r.createElement(o.PaperUnlink,null))},t})(r.Component);t.SecurityTab=s}),define("modules/clean/account_page/tabs/tab_definitions",["require","exports","external/react","modules/core/i18n","modules/clean/account_page/tabs/billing","modules/clean/account_page/tabs/connected_apps","modules/clean/account_page/tabs/general","modules/clean/account_page/tabs/notifications","modules/clean/account_page/tabs/security","modules/clean/account_page/tabs/plan"],function(e,t,n,r,a,i,o,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GENERAL={id:"general",displayName:r._("General"),view:n.createElement(o.GeneralTab,null)},t.PLAN={id:"plan",displayName:r._("Plan"),view:n.createElement(l.PlanTab,null)},t.BILLING={id:"billing",displayName:r._("Billing"),view:n.createElement(a.BillingTab,null),skipIf:function(e){return!e.paid},sidebar:{content:n.createElement("div",null,r._("Find receipt"))}},t.SECURITY={id:"security",displayName:r._("Security"),view:n.createElement(c.SecurityTab,null)},t.NOTIFICATIONS={id:"notifications",displayName:r._("Notifications"),view:n.createElement(s.NotificationsTab,null)},t.CONNECTED_APPS={id:"connected_apps",displayName:r._("Connected Apps"),view:n.createElement(i.ConnectedAppsTab,null)}}),define("modules/clean/account_page/util",["require","exports","modules/clean/viewer"],function(e,t,n){"use strict";function r(){return n.get_viewer().get_user_by_id(window.ensemble.viewer.getActiveUser().userId)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUser=r}),define("modules/clean/account_page/widgets/billing/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/billing/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(e){var t=this;return void 0===e&&(e=!1),function(i,o){return n.__awaiter(t,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"===o().billingInfo.loadingState||e?(i({type:"billing_info_load"}),[4,r.getBillingInfo(a.getCurrentUser().id)]):[3,2];case 1:return t=n.sent(),i({type:"billing_info_loaded",billingInfo:t}),[2,!0];case 2:return[2,!1]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i}),define("modules/clean/account_page/widgets/billing/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/account/ajax_billing_tab_model",subject_user:e,dataType:"json"})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getBillingInfo=a}),define("modules/clean/account_page/widgets/billing/reducers",["require","exports","external/redux","modules/clean/account_page/widgets/billing/types"],function(e,t,n,r){"use strict";function a(e,t){return void 0===e&&(e="never_loaded"),"billing_info_load"===t.type?"loading":"billing_info_loaded"===t.type?"ready":e}function i(e,t){return void 0===e&&(e=r.DefaultBillingInfo),"billing_info_loaded"===t.type?t.billingInfo:e}Object.defineProperty(t,"__esModule",{value:!0}),t.billingInfoReducer=n.combineReducers({billingInfo:i,loadingState:a})}),define("modules/clean/account_page/widgets/billing/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBillingInfo={description:"",expiration_date:"",period:"",has_more:!1,transactions:[]}}),define("modules/clean/account_page/widgets/connected_services/action_creators",["require","exports","tslib","modules/clean/account_page/util","modules/clean/profile_services/profile_services_link","modules/clean/profile_services/profile_services_constants","modules/core/exception","modules/clean/account_page/widgets/connected_services/api"],function(e,t,n,r,a,i,o,s){"use strict";function c(){var e=this;return function(t,a){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==a().connectedServices.loadingState?[3,2]:(t({type:"connected_services_load_services"}),[4,s.getThirdPartyProfileServices(r.getCurrentUser().id)]);case 1:e=n.sent(),t({type:"connected_services_services_loaded",services:e}),n.label=2;case 2:return[2]}})})}}function l(e,t){var r=this;return function(s){return n.__awaiter(r,void 0,void 0,function(){var r,c;return n.__generator(this,function(n){switch(n.label){case 0:return t===i.FACEBOOK?(o.assert(!1,"facebook linking has been deprecated"),[2,null]):(r=new a.ProfileServicesLinkingHandler,[4,r.auth_service_with_user_promise(t,e.id)]);case 1:return c=n.sent(),c.success&&s({type:"connected_services_service_connected",name:c.provider,displayName:c.profile.email}),[2,c]}})})}}function u(e,t){var r=this;return function(a,i){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(n){switch(n.label){case 0:return[4,s.unlinkUserFromService(e.id,t)];case 1:return n.sent(),a({type:"connected_services_service_disconnected",name:t}),[2,!0]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=c,t.authUserWithService=l,t.deauthUserWithService=u}),define("modules/clean/account_page/widgets/connected_services/api",["require","exports","tslib","modules/clean/profile_services/profile_services_constants","modules/clean/ajax_as_promised"],function(e,t,n,r,a){"use strict";function i(e){return e===r.IS_CONNECTED?"connected":e===r.WAS_CONNECTED?"was_connected":"never_connected"}function o(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]={connectionStatus:i(r.connection_status),displayName:r.display_name}}return t}function s(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,a.WebRequest({url:"/profile_services/thirdparty_profile_services",subject_user:e,dataType:"json"}).then(o)]})})}function c(e,t,r){return void 0===r&&(r=null),n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,a.WebRequest({url:"/profile_services/unlink",subject_user:e,data:{service:t,sourceId:r}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getThirdPartyProfileServices=s,t.unlinkUserFromService=c}),define("modules/clean/account_page/widgets/connected_services/reducers",["require","exports","tslib","external/redux"],function(e,t,n,r){"use strict";function a(e,t){if(void 0===e&&(e={}),"connected_services_services_loaded"===t.type)return t.services;if("connected_services_service_connected"===t.type){var r=n.__assign({},e);return r[t.name]={connectionStatus:"connected",displayName:t.displayName},r}if("connected_services_service_disconnected"===t.type){var r=n.__assign({},e);return delete r[t.name],r}return e}function i(e,t){return void 0===e&&(e="never_loaded"),"connected_services_load_services"===t.type?"loading":"connected_services_services_loaded"===t.type?"ready":e}Object.defineProperty(t,"__esModule",{value:!0}),t.servicesLoaded=a,t.connectedServicesReducer=r.combineReducers({services:a,loadingState:i})}),define("modules/clean/account_page/widgets/connected_services/view",["require","exports","tslib","external/react","external/react-redux","external/mcl/tertiary_link","modules/core/notify","modules/clean/account_page/widgets/connected_services/action_creators","modules/clean/profile_services/profile_services_constants","modules/clean/account_page/util","modules/constants/account_page","modules/clean/profile_services/profile_services_link","modules/core/i18n"],function(e,t,n,r,a,i,o,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=function(e){return{services:e.connectedServices.services}},m=function(e){return{fetchServices:function(){return e(s.loadDataIfNecessary())},connectService:function(t,n){return e(s.authUserWithService(t,n))},disconnectService:function(t,n){return e(s.deauthUserWithService(t,n))}}},f=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.fetchServices()},t.prototype.connectService=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.props.connectService(e,t)];case 1:return r=n.sent(),null!=r&&d.ProfileServicesLinkingHandler.show_import_notifications(r),[2]}})})},t.prototype.disconnectService=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.props.disconnectService(e,t)];case 1:return r=n.sent(),r&&o.success(p._("Successfully disconnected %(service)s.").format({service:c.to_name(t)})),[2]}})})},t.prototype.renderServiceRow=function(e,t){void 0===t&&(t=!1);var n,a=this.props.services[e],o=c.to_name(e),s=!1;null==a||"never_connected"===a.connectionStatus?n=p._("Connect your %(service_name)s account").format({service_name:o}):"connected"===a.connectionStatus?(n=p._("Disconnect"),s=!0):n=p._("Reconnect your %(service_name)s account").format({service_name:o});var u;return u=s?this.disconnectService.bind(this,l.getCurrentUser(),e):this.connectService.bind(this,l.getCurrentUser(),e),!(!s&&t)&&r.createElement("div",{"data-service":e,className:"connected-services__row"},r.createElement("span",{className:"connected-services__service"},o),r.createElement("div",{className:"connected-services__info-block"},s&&a.displayName&&r.createElement("span",{className:"connected-services__display-name"},s&&a&&a.displayName),r.createElement("span",null,r.createElement(i.TertiaryLink,{className:"connected-services__action-button",onClick:u},n))))},t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Connected Services"),r.createElement("p",{className:"account-page-block__subtext"},p._("Dropbox works best when you collaborate with people you know. Connecting these services\n          gives Dropbox info\n          including your name, your profile picture, and who you know to help you find friends and\n          work together.")),r.createElement("div",{className:"connected-services"},this.renderServiceRow(c.GOOGLE),this.renderServiceRow(c.YAHOO),this.renderServiceRow(c.FACEBOOK,!0),u.PROFILE_SERVICES_OUTLOOK[l.getCurrentUser().id]&&this.renderServiceRow(c.OUTLOOK)))},t})(r.Component);t.ConnectedServicesComponent=f,t.ConnectedServices=a.connect(_,m)(f)}),define("modules/clean/account_page/widgets/delete_account/view",["require","exports","tslib","external/react","modules/core/i18n","modules/clean/react/css","modules/clean/account_page/components/button_block","modules/clean/account_page/util","modules/clean/viewer"],function(e,t,n,r,a,i,o,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){if("work"===s.getCurrentUser().role)return null;var e=c.get_viewer().is_paired?a._("Delete my personal Dropbox"):a._("Delete my Dropbox"),t=a._("If you delete your account, your data will be gone forever");return r.createElement("div",{className:"account-page-block"},r.createElement("div",{className:"general-page-header"},a._("Delete Account")),r.createElement(o.ButtonBlock,{label:e,subtext:t,buttonText:a._("Delete account"),kind:"tertiary",buttonAction:{kind:"link",href:"/account/delete"}}))},t})(r.Component);t.DeleteAccountRowUnstyled=l,t.DeleteAccountRow=i(l,["/static/css/account/pagelet/index-vflK65iVR.css"])}),define("modules/clean/account_page/widgets/email_notifications/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/email_notifications/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(){var e=this;return function(t,i){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==i().emailNotifications.loadingState?[3,2]:(t({type:"email_notifications_load_preferences"}),[4,r.getEmailNotificationPreferencesMap(a.getCurrentUser().id)]);case 1:e=n.sent(),t({type:"email_notifications_preferences_loaded",notifications:e}),n.label=2;case 2:return[2]}})})}}function o(e,t){var i=this;return function(o){return n.__awaiter(i,void 0,void 0,function(){var i;return n.__generator(this,function(n){switch(n.label){case 0:return[4,r.saveEmailNotificationPreference(a.getCurrentUser().id,e,t)];case 1:return i=n.sent(),i&&o({type:"email_notification_preference_update",key:e,value:t}),[2,i]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i,t.updateEmailNotificationPreference=o}),define("modules/clean/account_page/widgets/email_notifications/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.BackgroundRequest({url:"/account/get_email_notification_prefs",subject_user:e,dataType:"json"})]})})}function i(e,t,a){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,r.WebRequest({url:"/account/set_email_notification_pref",subject_user:e,data:{email_notification_key:t,preference_value:a}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailNotificationPreferencesMap=a,t.saveEmailNotificationPreference=i}),define("modules/clean/account_page/widgets/email_notifications/notification_definitions",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NO_QUOTA_WARNING={id:"no_quota_warning",key:"NO_QUOTA_WARNING",negate:!0,displayName:n._("I'm running out of space")},t.EMAIL_ON_WEB_LOGIN={id:"email_on_web_login",key:"EMAIL_ON_WEB_LOGIN",negate:!1,displayName:n._("A new browser is used to sign in")},t.EMAIL_ON_NEW_HOST={id:"email_on_new_host",key:"EMAIL_ON_NEW_HOST",negate:!1,displayName:n._("A new device is linked")},t.EMAIL_ON_NEW_API_APP={id:"email_on_new_api_app",key:"EMAIL_ON_NEW_API_APP",negate:!1,displayName:n._("A new app is connected")},t.NO_DELETIONS_EMAILS={id:"no_deletions_emails",key:"NO_DELETIONS_EMAILS",negate:!0,displayName:n._("I delete a large number of files")},t.NO_NEWSLETTER={id:"no_newsletter",key:"NO_NEWSLETTER",negate:!0,displayName:n._("New features and updates")},t.NO_DFB_TIP_EMAILS={id:"no_dfb_tip_emails",key:"NO_DFB_TIP_EMAILS",negate:!0,displayName:n._("Tips on using Dropbox")},t.NO_TIP_EMAILS={id:"no_tip_emails",key:"NO_TIP_EMAILS",negate:!0,displayName:n._("Tips on using Dropbox")},t.NO_PAPER_TIPS_EMAILS={id:"no_paper_tips_emails",key:"NO_PAPER_TIPS_EMAILS",negate:!0,displayName:n._("Tips on using Dropbox Paper")},t.NO_DROPBOX_ACTIVITY_DIGESTS={id:"no_dropbox_activity_digests",key:"NO_DROPBOX_ACTIVITY_DIGESTS",negate:!0,displayName:n._("Activity in my shared folders")},t.NO_RESEARCH_EMAILS={id:"no_research_emails",key:"NO_RESEARCH_EMAILS",negate:!0,displayName:n._("Dropbox feedback surveys")}}),define("modules/clean/account_page/widgets/email_notifications/reducers",["require","exports","tslib","external/redux"],function(e,t,n,r){"use strict";function a(e,t){return void 0===e&&(e={}),"email_notifications_preferences_loaded"===t.type?t.notifications:"email_notification_preference_update"===t.type?n.__assign({},e,(r={},r[t.key]=!e[t.key],r)):e;var r}function i(e,t){return void 0===e&&(e="never_loaded"),"email_notifications_load_preferences"===t.type?"loading":"email_notifications_preferences_loaded"===t.type?"ready":e}Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsLoaded=a,t.emailNotificationsReducer=r.combineReducers({notifications:a,loadingState:i})}),define("modules/clean/account_page/widgets/email_notifications/view",["require","exports","tslib","external/react","external/react-redux","modules/core/i18n","modules/clean/account_page/widgets/email_notifications/action_creators","modules/clean/account_page/widgets/email_notifications/notification_definitions","modules/clean/account_page/util","modules/core/notify","external/mcl/checkbox"],function(e,t,n,r,a,i,o,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){return{notifications:e.emailNotifications.notifications}},p=function(e){return{fetchPreferences:function(){return e(o.loadDataIfNecessary())},setEmailNotificationPreference:function(t,n){return e(o.updateEmailNotificationPreference(t,n))}}},_=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.fetchPreferences()},t.prototype.handlePreferenceUpdate=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:return t=this.props.notifications[e.key],[4,this.props.setEmailNotificationPreference(e.key,!t)];case 1:return r=n.sent(),r?l.success(i._("Email notification preferences successfully updated.")):l.error(i._("Please try updating your email notification preferences again.")),[2]}})})},t.prototype.renderEmailNotificationPreferenceRow=function(e){var t,n=this.props.notifications[e.key];return t=e.negate?!n:n,r.createElement("li",{className:"email-notifications-prefs__option",key:e.key},r.createElement("label",{htmlFor:e.id},r.createElement("div",null,r.createElement(u.Checkbox,{checked:t?"checked":"unchecked",onChange:this.handlePreferenceUpdate.bind(this,e)}))),r.createElement("span",{className:"email-notifications-prefs__label"},e.displayName))},t.prototype.render=function(){return"personal"===c.getCurrentUser().role?r.createElement("div",{className:"account-page-block"},r.createElement("div",{className:"email-notifications-prefs__group"},r.createElement("span",{
className:"account-page-block__heading"},i._("Email notifications")),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me emails when"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_QUOTA_WARNING),this.renderEmailNotificationPreferenceRow(s.NO_DELETIONS_EMAILS),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_WEB_LOGIN),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_NEW_HOST),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_NEW_API_APP)),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me weekly emails about"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_DROPBOX_ACTIVITY_DIGESTS))),r.createElement("div",{className:"email-notifications-prefs__group"},r.createElement("span",{className:"account-page-block__heading"},i._("News and updates")),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me emails about"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_NEWSLETTER),this.renderEmailNotificationPreferenceRow(s.NO_TIP_EMAILS),this.renderEmailNotificationPreferenceRow(s.NO_PAPER_TIPS_EMAILS),this.renderEmailNotificationPreferenceRow(s.NO_RESEARCH_EMAILS)))):r.createElement("div",{className:"account-page-block"},r.createElement("div",{className:"email-notifications-prefs__group"},r.createElement("span",{className:"account-page-block__heading"},i._("Email notifications")),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me emails when"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_QUOTA_WARNING),this.renderEmailNotificationPreferenceRow(s.NO_DELETIONS_EMAILS),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_WEB_LOGIN),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_NEW_HOST),this.renderEmailNotificationPreferenceRow(s.EMAIL_ON_NEW_API_APP)),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me weekly emails about"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_DROPBOX_ACTIVITY_DIGESTS))),r.createElement("div",{className:"email-notifications-prefs__group"},r.createElement("span",{className:"account-page-block__heading"},i._("News and updates")),r.createElement("p",{className:"account-page-block__subtext"},i._("Send me emails about"),":"),r.createElement("ul",{className:"email-notifications-prefs__list"},this.renderEmailNotificationPreferenceRow(s.NO_NEWSLETTER),this.renderEmailNotificationPreferenceRow(s.NO_DFB_TIP_EMAILS),this.renderEmailNotificationPreferenceRow(s.NO_PAPER_TIPS_EMAILS),this.renderEmailNotificationPreferenceRow(s.NO_RESEARCH_EMAILS))))},t})(r.Component);t.EmailNotificationsComponent=_,t.EmailNotifications=a.connect(d,p)(_)}),define("modules/clean/account_page/widgets/linked_apps/view",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Linked Apps"),r.createElement("p",{className:"account-page-block__subtext"},"You've given these apps access to your personal Dropbox account."))},t})(r.Component);t.LinkedApps=a}),define("modules/clean/account_page/widgets/mobile_contacts/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/mobile_contacts/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(){var e=this;return function(t,i){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==i().mobileContacts.loadingState?[3,2]:(t({type:"mobile_contacts_load_devices"}),[4,r.getConnectedDevices(a.getCurrentUser().id)]);case 1:return e=n.sent(),t({type:"mobile_contacts_devices_loaded",devices:e}),[2,!0];case 2:return[2,!1]}})})}}function o(e){var t=this;return function(i){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return i({type:"mobile_contacts_purge_device",device:e}),[4,r.removeContactsForDevice(a.getCurrentUser().id,e)];case 1:return t.sent(),i({type:"mobile_contacts_device_purged",device:e}),[2,!0]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i,t.purgeContacts=o}),define("modules/clean/account_page/widgets/mobile_contacts/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/account/mobile_contact_devices",subject_user:e,dataType:"json"})]})})}function i(e,t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,r.WebRequest({url:"/account/purge_contacts_from_device",subject_user:e,dataType:"json",data:{device_id:t.device_id,app_id:t.app_id}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectedDevices=a,t.removeContactsForDevice=i}),define("modules/clean/account_page/widgets/mobile_contacts/reducers",["require","exports","external/redux"],function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e="never_loaded"),"mobile_contacts_load_devices"===t.type?"loading":"mobile_contacts_devices_loaded"===t.type?"ready":e}function a(e,t){return void 0===e&&(e=[]),"mobile_contacts_devices_loaded"===t.type?t.devices:"mobile_contacts_device_purged"===t.type?e.filter(function(e){return e.device_id!==t.device.device_id}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.mobileContactsReducer=n.combineReducers({devices:a,loadingState:r})}),define("modules/clean/account_page/widgets/mobile_contacts/view",["require","exports","tslib","external/react","external/react-redux","external/mcl/icon_form","modules/core/i18n","modules/clean/account_page/components/account_table","modules/clean/account_page/widgets/mobile_contacts/action_creators","modules/clean/datetime","modules/clean/react/sprite","modules/clean/react/modal"],function(e,t,n,r,a,i,o,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){return{devices:e.mobileContacts.devices}},_=function(e){return{fetchDevices:function(){return e(c.loadDataIfNecessary())},purgeContacts:function(t){return e(c.purgeContacts(t))}}},m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.confirmDeviceUnlink=function(e){d.SimpleModal.show({title_text:o._("Remove imported contacts?"),body_html:o._("This will remove the contacts imported from this device and sign you out of the Dropbox mobile app.\n      If you sign into the app later, your contacts may be imported to Dropbox again."),confirm_text:o._("Remove contacts"),cancel_text:o._("Cancel"),autoclose:!0,confirm_callback:function(){return t.props.purgeContacts(e)}})},t.renderDeviceRow=function(e,n){var a=o._("%(device_name)s icon").format({device_name:e.device_name}),c=t.confirmDeviceUnlink.bind(t,e);return r.createElement(s.BodyRow,{key:n},r.createElement(s.BodyCell,null,r.createElement(u,{className:"mobile-contacts-table__icon",group:"web",name:e.sprite,alt:a})," ",e.device_name),r.createElement(s.BodyCell,null,l.ago(e.last_activity)),r.createElement(s.BodyCell,null,r.createElement(i.IconForm,{name:"cancel",onClick:c})))},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.fetchDevices()},t.prototype.renderDeviceTable=function(){return r.createElement(s.Table,{className:"mobile-contacts-table"},r.createElement(s.TableHead,null,r.createElement(s.HeaderRow,null,r.createElement(s.HeaderCell,null,o._("Device name")),r.createElement(s.HeaderCell,null,o._("Most recent activity")),r.createElement(s.HeaderCell,null))),r.createElement(s.TableBody,null,this.props.devices.map(this.renderDeviceRow)))},t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Mobile Contacts"),r.createElement("p",{className:"account-page-block__subtext"},o._("You’ve imported contacts from the following mobile devices.")),this.renderDeviceTable())},t})(r.Component);t.MobileContacts=a.connect(p,_)(m)}),define("modules/clean/account_page/widgets/paper_unlink/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/unlink_paper_devices",data:{user_id:e}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPaperDevices=a}),define("modules/clean/account_page/widgets/paper_unlink/view",["require","exports","tslib","external/react","modules/clean/react/css","modules/core/i18n","modules/clean/account_page/widgets/paper_unlink/api","modules/core/notify","modules/clean/account_page/components/button_block","modules/clean/account_page/util"],function(e,t,n,r,a,i,o,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=(function(e){function t(){var t=e.call(this)||this;return t.state={disabled:!1},t}return n.__extends(t,e),t.prototype.handlePaperUnlink=function(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return this.setState({disabled:!0}),[4,o.unlinkPaperDevices(l.getCurrentUser().id)];case 1:return e=t.sent(),this.setState({disabled:!1}),e?s.success(i._("Successfully unlinked all Paper devices.")):s.error(i._("Unlinking Paper devices failed. Please try again later.")),[2]}})})},t.prototype.render=function(){var e=i._("Paper mobile devices"),t=i._("Unlink all of your mobile devices from Paper.");return r.createElement("div",{className:"account-page-block"},r.createElement(c.ButtonBlock,{label:e,subtext:t,buttonText:i._("Unlink"),kind:"secondary",buttonAction:{kind:"function",handler:this.handlePaperUnlink.bind(this)},disabled:this.state.disabled}))},t})(r.Component);t.PaperUnlink=a(u,["/static/css/account/pagelet/index-vflK65iVR.css"])}),define("modules/clean/account_page/widgets/plan/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/plan/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(){var e=this;return function(t,i){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==i().planTab.loadingState?[3,2]:(t({type:"plan_tab_load_info"}),[4,r.getPlanInfo(a.getCurrentUser().id)]);case 1:return e=n.sent(),t({type:"plan_tab_info_loaded",planInfo:e}),[2,!0];case 2:return[2,!1]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i}),define("modules/clean/account_page/widgets/plan/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/account/ajax_plan_tab_model",subject_user:e,dataType:"json"})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlanInfo=a}),define("modules/clean/account_page/widgets/plan/reducers",["require","exports","external/redux"],function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=i),"plan_tab_info_loaded"===t.type?t.planInfo:e}function a(e,t){return void 0===e&&(e="never_loaded"),"plan_tab_load_info"===t.type?"loading":"plan_tab_info_loaded"===t.type?"ready":e}Object.defineProperty(t,"__esModule",{value:!0});var i={serializedSubStatus:null,usageBreakdown:{quota:0,shared_usage:0,unshared_usage:0,usage:0}};t.planTabReducer=n.combineReducers({planInfo:r,loadingState:a})}),define("modules/clean/account_page/widgets/plan/views/cancel_plan",["require","exports","tslib","external/react","modules/core/i18n","modules/constants/python"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"cancel-plan"},r.createElement("span",{className:"cancel-plan__header"},a._("Cancel %(trademark)s plan").format({trademark:i.TRADEMARK_PLUS})),r.createElement("div",null,r.createElement("span",null,a._("If you cancel your plan, your account will dropb from 1 TB to 2 GB of space")),r.createElement("span",{className:"cancel-plan__downgrade-link"},r.createElement("a",{href:"/downgrade"},a._("Cancel plan")))))},t})(r.Component);t.CancelPlan=o}),define("modules/clean/account_page/widgets/plan/views/plan_container",["require","exports","tslib","modules/clean/react/css","external/react-redux","external/react","modules/clean/account_page/widgets/plan/views/cancel_plan","modules/clean/payments/skus/subscription_status","modules/clean/static_urls","modules/clean/account_page/widgets/plan/views/referral_space","modules/clean/account_page/widgets/plan/views/quota_usage","modules/clean/account_page/widgets/plan/views/plan_status","modules/clean/account_page/widgets/plan/action_creators","modules/core/i18n"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){return{planInfo:e.planTab.planInfo,loadingState:e.planTab.loadingState}},f=function(e){return{loadPlanInfo:function(){return e(p.loadDataIfNecessary())}}},h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.loadPlanInfo()},t.prototype.isLoading=function(){return"ready"!==this.props.loadingState},t.prototype.render=function(){var e=this.props.planInfo,t=e.serializedSubStatus,n=e.usageBreakdown,r=void 0;return t&&(r=s.SubscriptionStatus.deserialize(t)),this.isLoading()||void 0===r?i.createElement("div",{className:"loading-indicator"},i.createElement("img",{src:c.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),alt:_._("Loading")})):i.createElement("div",{className:"account-plan-tab"},i.createElement(d.PlanStatus,{subStatus:r}),i.createElement(u.QuotaUsage,{subStatus:r,usageBreakdown:n}),i.createElement(l.ReferralSpace,null),i.createElement(o.CancelPlan,null))},t})(i.Component);t.PlanContainerComponent=h;var y=a.connect(m,f)(h);t.PlanContainer=r(y,["/static/css/account/pagelet/plan_tab-vflZOHerE.css"])}),define("modules/clean/account_page/widgets/plan/views/plan_status",["require","exports","tslib","modules/core/browser","external/react","modules/clean/static_urls","modules/clean/payments/skus/constants","modules/core/i18n","modules/clean/payments/cash"],function(e,t,n,r,a,i,o,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeBillingPeriodClick=function(){},t.basicOnClick=function(){r.redirect("/upgrade")},t}return n.__extends(t,e),t.prototype.renderDropboxLogo=function(){return a.createElement("div",null,a.createElement("img",{src:i.static_url("/static/images/teams/admin/billing/dropbox-business-icon-vflgVGeUI.svg"),className:"plan-status-section__icon u-mar-left-s u-mar-right-s",alt:""}))},t.prototype.renderBasicPlanSection=function(){var e=this.props.subStatus,t=s._("Dropbox Basic");return e.subState.plan&&(t=e.subState.plan.displayName(!0)),a.createElement("div",{className:"plan-status-section"},this.renderDropboxLogo(),a.createElement("div",{className:"plan-status-section__description"},a.createElement("h1",{className:"plan-status-section__title"},t),a.createElement("a",{className:"plan-status-section__link",href:"/plans",target:"_blank",rel:"noopener noreferrer"},s._("See other plans"))),a.createElement("div",{className:"plan-status-section__upgrade_btn"},a.createElement("button",{className:"button-primary",onClick:this.basicOnClick},s._("Upgrade"))))},t.prototype.renderPaidPlanSection=function(){var e=this.props.subStatus;if(e.subState.plan){var t=s._("Your %(plan)s plan will revew on %(date)s. %(total)s per %(period)s.").format({plan:e.subState.plan.displayName(!0),date:e.formattedNextBillingDate,total:c.Cash.formatWithTaxLabels(e.nextBillingSummary.total,e.nextBillingSummary),period:e.subState.billingSchedule.scheduleDescriptionAdjective});return a.createElement("div",{className:"plan-status-section"},this.renderDropboxLogo(),a.createElement("div",{className:"plan-status-section__description"},a.createElement("h1",{className:"plan-status-section__title"},e.subState.plan.displayName(!0)),a.createElement("p",{className:"plan-status-section__title_description"},t," ",a.createElement("a",{className:"plan-status-section__link",href:"/plans",target:"_blank",rel:"noopener noreferrer"},s._("See other plans")),a.createElement("br",null),a.createElement("a",{className:"plan-status-section__link",onClick:this.onChangeBillingPeriodClick},s._("Change billing period")))))}},t.prototype.renderPlanSection=function(){var e=this.props.subStatus;if(!e.subState.plan)return this.renderBasicPlanSection();switch(e.subState.plan.productType){case o.ProductPlanType.BASIC:return this.renderBasicPlanSection();case o.ProductPlanType.STANDARD:return this.renderPaidPlanSection();default:return this.renderBasicPlanSection()}},t.prototype.render=function(){var e=this.renderPlanSection();return a.createElement("div",{className:"plan-status"},e)},t})(a.Component);t.PlanStatus=l}),define("modules/clean/account_page/widgets/plan/views/quota_usage",["require","exports","tslib","external/react","external/classnames","modules/clean/react/css","modules/core/i18n","modules/clean/display_format","modules/clean/react_format","modules/clean/payments/skus/constants","modules/constants/python"],function(e,t,n,r,a,i,o,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,"freeSpace",{get:function(){var e=this.props.usageBreakdown;return e.quota-e.usage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedFles",{get:function(){return this.props.usageBreakdown.shared_usage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"regularFles",{get:function(){return this.props.usageBreakdown.unshared_usage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usage",{get:function(){return this.props.usageBreakdown.usage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quota",{get:function(){return this.props.usageBreakdown.quota||.01},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNearQuota",{get:function(){return this.usage>.9*this.quota},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOverQuota",{get:function(){return this.usage>this.quota},enumerable:!0,configurable:!0}),t.prototype.getQuotaUpsell=function(){var e=this.props.subStatus;if(e.subState.plan)return e.subState.plan.productType===l.ProductPlanType.BASIC&&this.isOverQuota?r.createElement("div",{className:"quota-upsell"},o._("With %(plan)s, get 1 TB (1,000 GB) for all your photos, videos, docs and other files.           Keep everyting stored safely and at your fingertips.").format({plan:u.TRADEMARK_PLUS})," ",r.createElement("a",null,o._("Upgrade now"))):void 0},t.prototype.render=function(){var e="",t=c.reactFormat(o._("Using <strong>%(usage)s</strong> of %(quota)s").format({usage:s.format_bytes(this.usage),quota:s.format_bytes(this.quota)}),{strong:r.createElement("strong",null)});e=this.isOverQuota?o._("Your Personal Dropbox account is full"):o._("Personal Dropbox space");var n=(100*this.regularFles/this.quota).toFixed(2),i=n+"%",l=(100*this.sharedFles/this.quota).toFixed(2),u=l+"%",d={width:i},p={width:u},_=a({"account-plan-tab-quota-usage":!0,"is-within-quota":!this.isOverQuota,"is-over-quota":this.isOverQuota}),m=a({"bar-graph-part":!0,"bar-graph-normal":!0,"normal-color":!0,"is-zero":0===this.usage}),f=a({"bar-graph-part":!0,"bar-graph-shared":!0,"bar-shared-color":!0,"is-zero":0===this.sharedFles}),h=a({"bar-graph-legend":!0,"bar-graph-normal":!0,"normal-color":!0}),y=a({"bar-graph-legend":!0,"bar-graph-shared":!0,"shared-color":!0}),b=this.getQuotaUpsell();return r.createElement("div",{className:_},r.createElement("div",{className:"quota-header"},r.createElement("span",{className:"quota-header quota-header__plan"},e),r.createElement("span",{className:"quota-header quota-header__usage"},t)),r.createElement("div",{className:"quota-space-bar"},r.createElement("div",{className:"bar-graph"},r.createElement("div",{className:m,style:d}),r.createElement("div",{className:f,style:p}))),r.createElement("div",{className:"quota-space-legend"},r.createElement("div",{className:"bar-graph-key"},r.createElement("div",{className:"space-key"},r.createElement("div",{className:"bar-graph-legend-group"},r.createElement("div",{className:h}),r.createElement("span",{className:"bar-graph-key-text"},o._("Regular files")," (",s.format_bytes(this.regularFles),")")),r.createElement("div",{className:"bar-graph-legend-group"},r.createElement("div",{className:y}),r.createElement("span",{className:"bar-graph-key-text"},o._("Shared files")," (",s.format_bytes(this.sharedFles),")")),r.createElement("div",{className:"bar-graph-legend-group"},r.createElement("div",{className:"bar-graph-legend bar-graph-free"}),r.createElement("span",{className:"bar-graph-key-text"},o._("Unused space")," (",s.format_bytes(this.freeSpace),")"))))),b)},t})(r.Component);t.QuotaUsage=i(d,["/static/css/account/pagelet/quota_usage-vflMNKMFd.css"])}),define("modules/clean/account_page/widgets/plan/views/referral_space",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"referral-space"},r.createElement("strong",null,"Referral Table Component Placeholder"))},t})(r.Component);t.ReferralSpace=a}),define("modules/clean/account_page/widgets/security_checkup/view",["require","exports","tslib","external/react","modules/clean/react/css","modules/core/i18n","modules/clean/account_page/components/button_block"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=i._("Security checkup"),t=i._("Take a minute to review your Dropbox security settings.");return r.createElement("div",{className:"account-page-block"},r.createElement(o.ButtonBlock,{label:e,subtext:t,buttonText:i._("Start checkup"),kind:"secondary",buttonAction:{kind:"link",href:"/security_checkup"}}))},t})(r.Component);t.SecurityCheckup=a(s,["/static/css/account/pagelet/index-vflK65iVR.css"])}),define("modules/clean/account_page/widgets/security_upsell/view",["require","exports","tslib","modules/clean/react/css","external/react","modules/clean/react/image","modules/core/i18n","modules/clean/static_urls","modules/constants/python"],function(e,t,n,r,a,i,o,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){var t=e.call(this)||this;return t.handleExpand=function(){t.setState({expanded:!t.state.expanded})},t.handleX=function(){t.setState({hidden:!t.state.hidden})},t.state={expanded:!1,hidden:!1},t}return n.__extends(t,e),t.prototype.renderExpandButton=function(e){var t;return t=e?"up-arrow":"down-arrow",a.createElement("div",{className:"expand-button-container"},a.createElement("button",{className:"expand-button",onClick:this.handleExpand},o._("Additional %(trademark_plus)s security features").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("button",{className:t,onClick:this.handleExpand}))},t.prototype.renderX=function(){return a.createElement("div",{className:"X-button-image"},a.createElement("button",{className:"X-button",onClick:this.handleX}))},t.prototype.renderAdditionalFeatures=function(){return a.createElement("div",null,a.createElement("hr",{className:"divider security-upsell-container__divider"}),a.createElement("div",{className:"security-upsell-container__additional-features"},a.createElement("table",null,a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Version history and file recovery")),a.createElement("td",null,o._("View-only permissions"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Easily recover deleted files and restore previous file versions.")),a.createElement("td",null,o._("Some copy is needed here for this feature"))),a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Password-protected and expiring shared links")),a.createElement("td",null,o._("Remove device wipe"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Password-protect your links or set expiration dates to grant temporary access.")),a.createElement("td",null,o._("Clear files from lost or stolen devices to keep company data in the right hands."))),a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Require two-factor authentication (2FA)"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Require six-digit security code or key in addition to a password to access your account."))))))},t.prototype.render=function(){var e;return this.state.expanded&&(e=this.renderAdditionalFeatures()),this.state.hidden?a.createElement("noscript",null):a.createElement("div",{className:"security-upsell-container"},this.renderX(),a.createElement("div",{className:"security-upsell-container__content"},a.createElement("div",null,a.createElement("h1",null,o._("More Security Controls With %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("h2",null,o._("Get access to extra security features when you upgrade to %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("a",{href:"/buy",className:"mc-button mc-button-large mc-button-primary security-upsell-button"},o._("Upgrade to %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),this.renderExpandButton(this.state.expanded)),a.createElement(i,{className:"security-upsell-container__content__illo",alt:o._("Image of a safe"),src:s.static_url("/static/images/growth/experiments/security_upsell/Extra-controls@2x-vflPi86nK.svg"),srcHiRes:s.static_url("/static/images/growth/experiments/security_upsell/Extra-controls@2x-vflPi86nK.svg")})),e)},t})(a.Component);t.SecurityUpsellBanner=r(l,["/static/css/account/security_tab-vflVDIbfN.css","/static/css/mcl/button-vflFHw3Rq.css"])}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/payments/billing_info_base",["jquery","modules/clean/payments/cash","modules/clean/payments/pro_util","modules/clean/payments/payment_form_events","modules/core/controller_helpers"],function(t,n,r,a,i){var o,s,c,l,u;return s=n.Cash,c=n.CashUtil,u=r.TransitionInfoFetcher,l=r.TaxHelper,o=(function(){function n(t,n,r,a){this.$container=t,this.country_to_currency_map=n,this.transition_view_models=r,this.countryToTaxNameMap=a,this._recompute_costs_from_tvm=e(this._recompute_costs_from_tvm,this),this._recompute_costs=e(this._recompute_costs,this),this._display_tax=e(this._display_tax,this),this.updateForm=e(this.updateForm,this),this.getCurrentTransitionViewModel=e(this.getCurrentTransitionViewModel,this),this._getCurrency=e(this._getCurrency,this),this.listen_tax=e(this.listen_tax,this),this.transition_info_fetcher=new u(this.transition_view_models),this.payment_form=i.get_controller(this.$container.find(".payment-form-component")),this.hasTax=null!=this.countryToTaxNameMap,this.transition_view_models&&(this.transition_view_model=this.transition_view_models[0]),this.listen_tax()}return n.prototype.listen_tax=function(){if(this.hasTax)return this.$container.on(a.LOCATION_CHANGE_EVENT,(function(e){return function(t,n){if(t.stopPropagation(),l.require_recompute(e.get_country_code(),e.get_zip_code()))return e.updateForm()}})(this))},n.prototype.get_zip_code=function(){return this.$container.find('input:visible[name="zip"]').val()},n.prototype.get_country_code=function(){return this.$container.find('[name="country_code"]').val()},n.prototype._getCountryTaxName=function(e){return this.countryToTaxNameMap[e]||this.countryToTaxNameMap.Other},n.prototype._getCurrency=function(){var e,t;return e=this.payment_form.get_country_code(),null!=(t=this.country_to_currency_map)?t[e]:void 0},n.prototype.getCurrentTransitionViewModel=function(){return this.transition_view_model},n.prototype.updateForm=function(){return this._recompute_costs()},n.prototype._display_tax=function(){return l.display_tax(this.get_country_code())?(t(".tax-row").removeClass("hidden_elem"),t(".tax-name-wrapper").text(this._getCountryTaxName(this.get_country_code())),!0):(t(".tax-row").addClass("hidden_elem"),!1)},n.prototype._recompute_costs=function(){var e;return e={zip:this.get_zip_code(),country_code:this.get_country_code()},this.transition_info_fetcher.get(this._recompute_costs_from_tvm,e,!0)},n.prototype._recompute_costs_from_tvm=function(e){var n,r,a,i,o,u,d,p,_,m,f,h,y;if(e)return this.transition_view_model=e,r=this._getCurrency(),this.$container.find(".currency-wrapper").text(r),f=l.compute_tax(e.read_only_invoice,r),p=f[0],n=f[1],h=f[2],a=c.formatCurrency(p.amount,p.currency),this.$container.find(".price-amount-wrapper").text(a),e.rebill&&(_=s.fromObject(e.rebill.total),i=c.formatCurrency(_.amount,_.currency),this.$container.find(".rebill-amount-wrapper").text(i)),e.state.total_recurring_price&&(m=s.fromObject(e.state.total_recurring_price),o=c.formatCurrency(m.amount,m.currency),this.$container.find(".rebill-price-wrapper").text(o)),y=this._getTotalAmount(e),d=c.formatCurrency(y.amount,y.currency),this.$container.find(".total-amount-wrapper").text(d),t(".tax-row").toggleClass("hidden_elem",this._display_tax()),u=c.formatCurrency(h.amount,h.currency),t(".tax-amount-wrapper").text(u),[p,n,h,_,r]},n})(),{BillingInfoModalBase:o}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var a in t)n.call(t,a)&&(e[a]=t[a]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty,r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/payments/billing_info_modal",["jquery","modules/core/cookies","modules/core/uri","modules/clean/analytics","modules/clean/dbmodal","modules/clean/payments/payment_form_events","modules/clean/deprecated/uirequest","modules/clean/payments/cash","modules/clean/payments/pro_util","modules/clean/payments/billing_info_base"],function(a,i,o,s,c,l,u,d,p,_){var m,f,h,y;return y=s.TeamsWebActionsLogger,h=c.DBModalStack,f=d.Cash,d.CashUtil,p.TransitionInfoFetcher,p.TaxHelper,m=_.BillingInfoModalBase,(function(s){function c(t,n,i,s,d){this.$container=t,this.payment_link_map=n,this.transition_view_models=i,this.country_to_currency_map=s,this.countryToTaxNameMap=d,this._update_disclaimer=e(this._update_disclaimer,this),this._postRequest=e(this._postRequest,this),c.__super__.constructor.call(this,this.$container,this.country_to_currency_map,this.transition_view_models,this.countryToTaxNameMap),this.$container.on("click",".cancel-button",function(){return y.log("update_billing_open_cancel"),h.pop()}),this.$container.on("click",".confirm-button",(function(e){return function(){
if(y.log("update_billing_open_save_changes_click"),e.payment_form.validate())return e.$container.find(".confirm-button").prop("disabled",!0),e.payment_form.get_form_inputs(function(t){var n,i,s,l;return e.$container.find(".confirm-button").prop("disabled",!1),l=["resubscribe"],e.$container.find("input, select").each(function(e,n){var i,o;if(i=a(n),o=i.attr("name"),r.call(l,o)>=0)return t[o]=i.val()}),s=e.payment_form.get_selected_payment_method_id(),i=e.payment_link_map[s],"extra_params"in i&&(n=i.extra_params,a.extend(t,n)),i.use_form_post?e._postRequest(o({path:i.endpoint}),t):new u(e.$container,i.endpoint,{data:t,success:function(e){if(e.data&&e.data.success)return y.log("update_billing_open_save_changes_success"),h.trigger(c.BILLING_INFO_UPDATED),h.pop()}})})}})(this)),this.payment_form.$container.on(l.PAYMENT_METHOD_TYPE_CHANGE_EVENT,this._update_disclaimer),null!=this.transition_view_models&&this.updateForm()}return t(c,s),c.BILLING_INFO_UPDATED="billing_info_modal:updated",c.prototype._postRequest=function(e,t){var r,a,o;t.t=i.read("__Host-js_csrf"),a=document.createElement("form"),a.action=e,a.method="POST",document.body.appendChild(a);for(o in t)n.call(t,o)&&(r=document.createElement("input"),r.type="hidden",r.name=o,r.value=t[o],a.appendChild(r));return a.submit()},c.prototype._update_disclaimer=function(e,t){return t=parseInt(t,10),this.$container.find(".payment-method-disclaimer").each(function(e,n){var r;return r=a(n).data("payment-method-id"),a(n).toggleClass("hidden",r!==t)})},c.prototype._getTotalAmount=function(e){return f.fromObject(e.read_only_invoice.total)},c})(m)})}.call(this),define("modules/clean/payments/cash",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){}return e.set_locale_number_format=function(t,n,r){void 0===t&&(t=","),void 0===n&&(n="."),void 0===r&&(r="-"),e.groupSymbol=t,e.decimalSymbol=n,e.minusSignSymbol=r},e.set_currency_format_map=function(t){e.currencyFormatMap=t},e.update_currency_format_map=function(t,n){e.currencyFormatMap[t]=n},e.formatAmountThousandsHelper=function(t){var n=Math.abs(parseInt(t,10)).toFixed(0).toString();if(n.length<=3)return n;var r=n.substr(0,n.length-3);return e.formatAmountThousandsHelper(r)+e.groupSymbol+n.substr(n.length-3)},e.roundCurrency=function(t,n,r){return void 0===n&&(n="USD"),void 0===r&&(r=2),r=t%1===0?0:r,e.formatCurrency(t,n,r)},e.formatCurrency=function(t,n,r){void 0===n&&(n="USD"),void 0===r&&(r=2);var a=parseFloat(t);"JPY"===n&&(r=0);var i=e.formatNumber(a,r);return e.currencyFormatMap[n]?e.currencyFormatMap[n].replace("%v",i):i+" "+n},e.splitFormatCurrency=function(t,n,r){void 0===n&&(n="USD"),void 0===r&&(r=2);var a=e.formatCurrency(t,n,r),i=a.indexOf(e.decimalSymbol);return i===-1?[a,""]:[a.slice(0,i+1),a.slice(i+1)]},e.formatNumber=function(t,n){void 0===n&&(n=2);var r=t<0?e.minusSignSymbol:"",a="";return n>0&&(a=e.decimalSymbol+t.toFixed(n).split(".")[1]),r+e.formatAmountThousandsHelper(t)+a},e.removeFormatting=function(t,n){var r=e.currencyFormatMap[n],a=r.replace("%v","");return t.replace(a,"").replace(e.groupSymbol,"")},e})();r.groupSymbol=",",r.decimalSymbol=".",r.minusSignSymbol="-",r.currencyFormatMap={USD:"$%v"},t.CashUtil=r;var a=(function(){function e(e,t){this.cash1=e,this.cash2=t}return e})();t.CashCurrenciesDoNotMatch=a;var i=(function(){function e(){}return e})();t.CashNeedsAmountAndCurrency=i;var o=(function(){function e(e,t){this.currency=t;var n=parseFloat(""+e);if(isNaN(n)||!this.currency)throw new i;var r=Math.pow(10,2);this.amount=Math.round(n*r)/r}return e.fromObject=function(t){return new e(parseFloat(t.amount),t.currency)},e.fromString=function(t,n){return new e(r.removeFormatting(t,n),n)},e.prototype.add=function(t){if(this.currency!==t.currency)throw new a(this,t);return new e(this.amount+t.amount,this.currency)},e.prototype.subtract=function(t){return this.add(new e(-t.amount,t.currency))},e.prototype.multiply=function(t){return new e(this.amount*t,this.currency)},e.prototype.divide=function(t){return new e(this.amount/t,this.currency)},e.prototype.round=function(t){void 0===t&&(t=2);var n=Math.pow(10,t);return new e(Math.round(this.amount*n)/n,this.currency)},e.prototype.toString=function(e){return void 0===e&&(e=2),"JPY"===this.currency&&(e=0),r.roundCurrency(this.amount,this.currency,e)},e.prototype.formatCurrency=function(e){return void 0===e&&(e=2),r.formatCurrency(this.amount,this.currency,e)},e.formatWithTaxLabels=function(e,t){return t.doesTaxApply?n._("%(price)s (taxes included)").format({price:e.formatCurrency()}):e.formatCurrency()},e})();t.Cash=o}),function(){define("modules/clean/payments/payment_form_events",[],function(){return(function(){function e(){}return e.LOCATION_CHANGE_EVENT="db:paymentform:countrycodechanged",e.ZIP_CHANGE_EVENT="db:paymentform:zipchanged",e.PAYMENT_METHOD_TYPE_CHANGE_EVENT="db:paymentform:paymentmethodtypechanged",e.VAT_CHANGE_EVENT="db:paymentform:vatchanged",e.UNVALIDATED="db:paymentform:unvalidated",e.VALIDATE_ERROR="db:paymentform:validateerror",e.VALIDATE_SUCCESS="db:paymentform:validatesuccess",e.LOADED_EVENT="db:paymentform:loaded",e.IFRAME_LOADED_EVENT="db:paymentform:iframeloaded",e.IFRAME_FIELDS_STATUS_EVENT="db:paymentform:iframefieldsstatusevent",e.TRANSITION_FETCHED="db:paymentform:transitionfetched",e.EDIT_SIMPLE_COUNTRY_CLICK_EVENT="db:paymentform:editsimplecountry",e})()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/payments/pro_util",["external/underscore","modules/clean/ajax","modules/clean/payments/cash","modules/clean/payments/validation","modules/core/exception"],function(t,n,r,a,i){var o,s,c;return o=r.Cash,i.assert,s=(function(){function e(){}return e.compute_tax=function(e,t){var n,r,a,i,s,c,l,u,d;for(c=null,r=null,d=new o(0,t),u=e.line_items,a=0,i=u.length;a<i;a++)s=u[a],1===s.line_item_type?c=s:2===s.line_item_type&&(r=s),s.country_tax_amount&&(d=d.add(o.fromObject(s.country_tax_amount))),s.state_tax_amount&&(d=d.add(o.fromObject(s.state_tax_amount)));return l=null!=c?o.fromObject(c.line_item_price):new o(0,t),n=null!=r?o.fromObject(r.line_item_price):new o(0,t),[l,n,d]},e.require_recompute=function(e,t){return"US"===e&&/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)},e.display_tax=function(e){return"US"===e},e})(),c=(function(){function r(t){var n,r,a,i;if(this.default_transition_view_models=t,this._get_transition_info_for=e(this._get_transition_info_for,this),this._add_to_cache=e(this._add_to_cache,this),this._has_inflight_request=e(this._has_inflight_request,this),this.get=e(this.get,this),this._get_state_json=e(this._get_state_json,this),this._cache_key_from_transition=e(this._cache_key_from_transition,this),this._requests={},this.transition_info_cache={},this.default_transition_view_models)for(a=this.default_transition_view_models,n=0,r=a.length;n<r;n++)i=a[n],this._add_to_cache(i)}return r.prototype._cache_key=function(e){return t.values(e).join(":")},r.prototype._cache_key_from_transition=function(e){var t,n,r;return t={country_code:null!=(n=e.read_only_invoice)?n.tax_country_code:void 0,zip_code:null!=(r=e.read_only_invoice)?r.tax_zip_code:void 0},this._cache_key(t)},r.prototype._get_state_json=function(){var e,t,n;return n=null!=(e=this.default_transition_view_models)&&null!=(t=e[0])?t.state:void 0,JSON.stringify(n)},r.prototype.get=function(e,r,a){var i,o,s;if(i=this._cache_key(r),o=this._get_transition_info_for(i))return void e(o);if(!this._requests[i]){if(this._has_inflight_request()&&a)for(s in this._requests)delete this._requests[s];else if(this._has_inflight_request())return;return this._requests[i]=!0,n.SilentBackgroundRequest({url:"/pro/ajax_transition_view_model",dataType:"json",data:t.extend({json_state:this._get_state_json()},r),success:(function(t){return function(n){if(t._add_to_cache(n),null!=t._requests[i])return delete t._requests[i],e(n)}})(this),error:(function(e){return function(t){if(null!=e._requests[i])return delete e._requests[i]}})(this)})}},r.prototype._has_inflight_request=function(){return Object.keys(this._requests).length},r.prototype._add_to_cache=function(e){var t;return t=this._cache_key_from_transition(e),this.transition_info_cache[t]=e},r.prototype._get_transition_info_for=function(e){return null!=this.transition_info_cache[e]},r})(),{TransitionInfoFetcher:c,TaxHelper:s}})}.call(this),define("modules/clean/payments/skus/billing_schedule",["require","exports","modules/core/i18n","modules/clean/payments/skus/constants"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){var n=new e;return n.serializedBillingSchedule=t,n},Object.defineProperty(e.prototype,"id",{get:function(){return this.serializedBillingSchedule.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.serializedBillingSchedule.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleDescriptionAdjective",{get:function(){switch(this.id){case r.ScheduleId.MONTHLY:return n._("monthly");case r.ScheduleId.YEARLY:return n._("yearly");default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unlocalizedName",{get:function(){return this.serializedBillingSchedule.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){switch(this.serializedBillingSchedule.id){case r.ScheduleId.MONTHLY:return n._("monthly");case r.ScheduleId.YEARLY:return n._("yearly")}return""},enumerable:!0,configurable:!0}),e})();t.BillingSchedule=a}),define("modules/clean/payments/skus/billing_summary",["require","exports","modules/core/i18n","modules/clean/payments/skus/billing_summary_line_item","modules/clean/payments/skus/constants","modules/clean/payments/cash"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(){}return e.deserialize=function(t){var n=new e;return t?(n._lineItems=t.lineItems.map(function(e){return r.BillingSummaryLineItem.deserialize(e)}),n.baseAmount=i.Cash.fromObject(t.baseAmount),n.discountAmount=i.Cash.fromObject(t.discountAmount),n._discountPercentage=t.discountPercentage,n._doesTaxApply=t.doesTaxApply,n.taxAmount=i.Cash.fromObject(t.taxAmount),n.totalAmount=i.Cash.fromObject(t.totalAmount),n._taxRate=t.taxRate,n._taxName=t.taxName,n):n},Object.defineProperty(e.prototype,"lineItems",{get:function(){return this._lineItems.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"base",{get:function(){return this.baseAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discount",{get:function(){return this.discountAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discountPercentage",{get:function(){return this._discountPercentage},enumerable:!0,configurable:!0}),e.prototype.getPerLicenseCost=function(e){for(var t=0,n=this.lineItems;t<n.length;t++){var r=n[t];if(r.sku.code===e){var a=r.price.amount/r.quantity,o=1-this.discountPercentage/100;return new i.Cash(a*o,r.price.currency)}}},Object.defineProperty(e.prototype,"tax",{get:function(){return this.taxAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taxRate",{get:function(){return this._taxRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taxName",{get:function(){return this._taxName},enumerable:!0,configurable:!0}),e.prototype.taxString=function(){return this.taxRate<=0?"":n._("(including %(tax_rate_str)s tax)").format({tax_rate_str:n.format_percent(this.taxRate)})},Object.defineProperty(e.prototype,"total",{get:function(){return this.totalAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalLicenses",{get:function(){return this._lineItems.reduce(function(e,t){return t.sku.productClass===a.ProductClass.LICENSE&&(e+=t.quantity),e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doesTaxApply",{get:function(){return this._doesTaxApply},enumerable:!0,configurable:!0}),e})();t.BillingSummary=o}),define("modules/clean/payments/skus/billing_summary_line_item",["require","exports","modules/clean/payments/skus/catalog_sku","modules/clean/payments/cash"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){var a=new e;return a._sku=n.CatalogSku.deserialize(t.sku),a._quantity=t.quantity,a._price=r.Cash.fromObject(t.price),t.lineItemPrice?a._displayPrice=r.Cash.fromObject(t.lineItemPrice):a._displayPrice=r.Cash.fromObject(t.price),a},Object.defineProperty(e.prototype,"sku",{get:function(){return this._sku},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quantity",{get:function(){return this._quantity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayPrice",{get:function(){return this._displayPrice},enumerable:!0,configurable:!0}),e})();t.BillingSummaryLineItem=a}),define("modules/clean/payments/skus/catalog_sku",["require","exports","modules/core/i18n","modules/clean/payments/skus/billing_schedule","modules/clean/payments/cash","modules/clean/display_format","modules/clean/payments/skus/constants","modules/constants/python"],function(e,t,n,r,a,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(){function e(e){this.serializedSku=e,this.billingSchedule=r.BillingSchedule.deserialize(e.billingSchedule)}return e.deserialize=function(t){return new e(t)},e.prototype.displayName=function(e){if(void 0===e&&(e=!1),e)return this.displayUntranslatableNameDirectFromSku;if(this.productClass===o.ProductClass.PLAN)switch(this.productType){case o.ProductPlanType.STANDARD:return n._("Prior %(trademark_business)s").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.TRIAL:return n._("Prior %(trademark_business)s trial").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.NEW_STANDARD:return n._("Standard");case o.ProductPlanType.STANDARD_TRIAL:return n._("Standard trial");case o.ProductPlanType.ADVANCED:return n._("Advanced");case o.ProductPlanType.ADVANCED_TRIAL:return n._("Advanced trial");case o.ProductPlanType.SERVER:return n._("Advanced Server Integration");case o.ProductPlanType.SERVER_TRIAL:return n._("Advanced Server Integration trial");default:return n._("Current Plan")}return this.productClass===o.ProductClass.LICENSE?n._("License(s)"):this.productClass===o.ProductClass.ADDON&&this.productType===o.ProductAddonType.QUOTA?n._("%(quota)s space").format({quota:this.formattedSpecQuotaGb}):""},e.prototype.displaySpace=function(){return this.productClass===o.ProductClass.PLAN?this.productType===o.ProductPlanType.STANDARD||this.productType===o.ProductPlanType.TRIAL||this.productType===o.ProductPlanType.ADVANCED||this.productType===o.ProductPlanType.ADVANCED_TRIAL?n._("As much space as you need"):n._("%(space_quota)s of space").format({space_quota:this.longFormSpecQuotaGb}):""},e.prototype.descriptionName=function(){if(this.productClass===o.ProductClass.LICENSE)switch(this.productType){case o.ProductPlanType.STANDARD:return n._("Prior %(trademark_business)s").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.NEW_STANDARD:switch(this.billingSchedule.id){case o.ScheduleId.MONTHLY:return n._("Standard, billed monthly");case o.ScheduleId.YEARLY:return n._("Standard, billed yearly");default:return n._("Standard")}case o.ProductPlanType.ADVANCED:switch(this.billingSchedule.id){case o.ScheduleId.MONTHLY:return n._("Advanced, billed monthly");case o.ScheduleId.YEARLY:return n._("Advanced, billed yearly");default:return n._("Advanced")}default:return n._("Current Plan")}return this.productClass===o.ProductClass.ADDON&&this.productType===o.ProductAddonType.QUOTA?n._("Addl. space"):""},Object.defineProperty(e.prototype,"code",{get:function(){return this.serializedSku.code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayUntranslatableNameDirectFromSku",{get:function(){return this.serializedSku.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclusionGroup",{get:function(){return this.serializedSku.exclusionGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productFamily",{get:function(){return this.serializedSku.productFamily},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxId",{get:function(){return this.serializedSku.adminCxId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productClass",{get:function(){return this.serializedSku.productClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productType",{get:function(){return this.serializedSku.productType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productSpec",{get:function(){return this.serializedSku.productSpec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schedule",{get:function(){return this.serializedSku.schedule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleId",{get:function(){return this.serializedSku.billingSchedule.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleName",{get:function(){return this.serializedSku.billingSchedule.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleDescription",{get:function(){return this.serializedSku.billingSchedule.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCost",{get:function(){return a.Cash.fromObject(this.serializedSku.price.displayCost)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCostIsTaxInclusive",{get:function(){return this.serializedSku.price.isTaxInclusive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specQuotaGb",{get:function(){return this.serializedSku.specQuotaGb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedSpecQuotaGb",{get:function(){if(this.specQuotaGb)return i.formatGigabytes(this.specQuotaGb)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longFormSpecQuotaGb",{get:function(){if(this.specQuotaGb)return"%(formatted_quota)s (%(space_quota)s GB)".format({formatted_quota:this.formattedSpecQuotaGb,space_quota:this.specQuotaGb})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxName",{get:function(){return this.serializedSku.adminCxName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrialPlan",{get:function(){return this.productType===o.ProductPlanType.TRIAL||this.productType===o.ProductPlanType.STANDARD_TRIAL||this.productType===o.ProductPlanType.ADVANCED_TRIAL||this.productType===o.ProductPlanType.SERVER_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLegacyPlan",{get:function(){return!this.isStandardPlan&&!this.isAdvancePlan&&!this.isServerPlan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStandardPlan",{get:function(){return this.productType===o.ProductPlanType.NEW_STANDARD||this.productType===o.ProductPlanType.STANDARD_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAdvancePlan",{get:function(){return this.productType===o.ProductPlanType.ADVANCED||this.productType===o.ProductPlanType.ADVANCED_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isServerPlan",{get:function(){return this.productType===o.ProductPlanType.SERVER||this.productType===o.ProductPlanType.SERVER_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxDescription",{get:function(){if(this.productClass===o.ProductClass.PLAN)return this.adminCxName;if(this.productClass===o.ProductClass.ADDON)switch(this.productSpec){case o.ProductSpec.SPACE_PACK_100G:return"100GB Team Space Extra";case o.ProductSpec.SPACE_PACK_10T:return"10TB Team Space Extra";case o.ProductSpec.SPACE_PACK_50T:return"50TB Team Space Extra";case o.ProductSpec.SPACE_PACK_200T:return"200TB Team Space Extra";case o.ProductSpec.SPACE_PACK_500T:return"500TB Team Space Extra";case o.ProductSpec.SPACE_PACK_1000T:return"1000TB Team Space Extra";case o.ProductSpec.SPACE_PACK_5000T:return"5000TB Team Space Extra"}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsValid",{get:function(){return this.productClass===o.ProductClass.PLAN&&(this.billingSchedule.id!==o.ScheduleId.FIVE_YEARS&&(this.productFamily!==o.ProductFamily.ENTERPRISE||this.billingSchedule.id!==o.ScheduleId.MONTHLY))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsUnlimited",{get:function(){if(this.productClass!==o.ProductClass.PLAN)return!1;if(this.productFamily===o.ProductFamily.TEAM)switch(this.productType){case o.ProductPlanType.NEW_STANDARD:case o.ProductPlanType.STANDARD_TRIAL:case o.ProductPlanType.SERVER:case o.ProductPlanType.SERVER_TRIAL:return!1}else{if(this.productFamily===o.ProductFamily.ENTERPRISE&&this.productType===o.ProductPlanType.SERVER)return!1;if(this.productFamily===o.ProductFamily.EDUCATION)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsSpacePackEligible",{get:function(){return this.productClass===o.ProductClass.PLAN&&!(this.adminCxIsUnlimited||this.productFamily===o.ProductFamily.TEAM&&this.productType===o.ProductPlanType.NEW_STANDARD)},enumerable:!0,configurable:!0}),e})();t.CatalogSku=c}),define("modules/clean/payments/skus/catalog_sku_set",["require","exports","modules/clean/payments/skus/catalog_sku","modules/clean/payments/skus/constants"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e){this._skus=e}return e.fromSerializedSkus=function(t){return new e(t.map(function(e){return new n.CatalogSku(e)}))},Object.defineProperty(e.prototype,"sku",{get:function(){if(1!==this._skus.length)throw new Error("Unable to resolve to a single SKU");return this._skus[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skus",{get:function(){return this._skus.slice()},enumerable:!0,configurable:!0}),e.prototype.filter=function(t){return new e(this._skus.filter(t))},e.prototype.withAdminCxId=function(e){return this.filter(function(t){return t.adminCxId===e})},e.prototype.withCode=function(e){return this.filter(function(t){return t.code===e})},e.prototype.withFamily=function(e){return this.filter(function(t){return t.productFamily===e})},e.prototype.withClass=function(e){return this.filter(function(t){return t.productClass===e})},e.prototype.withType=function(e){return this.filter(function(t){return t.productType===e})},e.prototype.withSchedule=function(e){return this.filter(function(t){return t.schedule===e})},e.prototype.monthly=function(){return this.withSchedule(r.ProductSchedule.MONTHLY)},e.prototype.yearly=function(){return this.withSchedule(r.ProductSchedule.YEARLY)},e.prototype.peekSkus=function(){if(this._skus.length>0)return this._skus[0]},e.prototype.contains=function(e){for(var t=0;t<this._skus.length;t++)if(this._skus[t].code===e.code)return!0;return!1},e})();t.CatalogSkuSet=a}),define("modules/clean/payments/skus/constants",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";function r(e){switch(e){case o.YEARLY:return n._("yearly");case o.TWO_YEARS:return n._("2 year plan");case o.THREE_YEARS:return n._("3 year plan");case o.FIVE_YEARS:return n._("5 year plan");case o.TRIAL:return n._("trial");case o.TRIAL_15_DAYS:return n._("15 days trial");case o.YEARLY_WITH_MONTHLY_BILLING:return n._("yearly with monthly billing");default:return n._("monthly")}}function a(e){switch(e){case i.MONTHLY:return o.MONTHLY;case i.YEARLY:return o.YEARLY;case i.TWO_YEARS:return o.TWO_YEARS;case i.THREE_YEARS:return o.THREE_YEARS;case i.FIVE_YEARS:return o.FIVE_YEARS;case i.TRIAL:return o.TRIAL;case i.TRIAL_15_DAYS:return o.TRIAL_15_DAYS;case i.YEARLY_WITH_MONTHLY_BILLING:return o.YEARLY_WITH_MONTHLY_BILLING}throw"Invalid schedule ID"}Object.defineProperty(t,"__esModule",{value:!0});var i;(function(e){e[e.MONTHLY=1]="MONTHLY",e[e.YEARLY=2]="YEARLY",e[e.TWO_YEARS=21]="TWO_YEARS",e[e.THREE_YEARS=22]="THREE_YEARS",e[e.FIVE_YEARS=23]="FIVE_YEARS",e[e.TRIAL=1e5]="TRIAL",e[e.TRIAL_15_DAYS=11]="TRIAL_15_DAYS",e[e.YEARLY_WITH_MONTHLY_BILLING=24]="YEARLY_WITH_MONTHLY_BILLING"})(i=t.ScheduleId||(t.ScheduleId={})),t.TRIAL_LENGTH_DEFAULT=30;var o;(function(e){e[e.MONTHLY="1M"]="MONTHLY",e[e.YEARLY="1Y"]="YEARLY",e[e.TWO_YEARS="2Y"]="TWO_YEARS",e[e.THREE_YEARS="3Y"]="THREE_YEARS",e[e.FIVE_YEARS="5Y"]="FIVE_YEARS",e[e.TRIAL="U"]="TRIAL",e[e.TRIAL_15_DAYS="NR15D"]="TRIAL_15_DAYS",e[e.YEARLY_WITH_MONTHLY_BILLING="AC1M"]="YEARLY_WITH_MONTHLY_BILLING",e[e.UNLIMITED="U"]="UNLIMITED"})(o=t.ProductSchedule||(t.ProductSchedule={})),t.productScheduleToProductScheduleDescription=r,t.scheduleIdToProductSchedule=a;(function(e){e[e.PRO=1]="PRO",e[e.TEAM=2]="TEAM",e[e.ENTERPRISE=3]="ENTERPRISE",e[e.EDUCATION=4]="EDUCATION"})(t.ProductFamily||(t.ProductFamily={}));(function(e){e[e.PLAN=1]="PLAN",e[e.ADDON=2]="ADDON",e[e.LICENSE=3]="LICENSE",e[e.SERVICE=4]="SERVICE"})(t.ProductClass||(t.ProductClass={}));(function(e){e[e.FREE=1]="FREE",e[e.TRIAL=2]="TRIAL",e[e.MOBILE=3]="MOBILE",e[e.BASIC_PLUS=4]="BASIC_PLUS",e[e.STANDARD=5]="STANDARD",e[e.PREMIUM=6]="PREMIUM",e[e.LEGACY=7]="LEGACY",e[e.BASIC=8]="BASIC",e[e.NEW_STANDARD=9]="NEW_STANDARD",e[e.ADVANCED=10]="ADVANCED",e[e.STANDARD_TRIAL=11]="STANDARD_TRIAL",e[e.ADVANCED_TRIAL=12]="ADVANCED_TRIAL",e[e.STARTER=13]="STARTER",e[e.SERVER=14]="SERVER",e[e.SERVER_TRIAL=15]="SERVER_TRIAL"})(t.ProductPlanType||(t.ProductPlanType={}));(function(e){e[e.LICENSE=101]="LICENSE",e[e.EVH=102]="EVH",e[e.EVH_FREE=103]="EVH_FREE",e[e.QUOTA=104]="QUOTA",e[e.CAPTURE=105]="CAPTURE",e[e.SUPPORT=106]="SUPPORT",e[e.EVH_FREE_THREE_MONTHS=107]="EVH_FREE_THREE_MONTHS",e[e.INFINITE=108]="INFINITE",e[e.PREMIUM_SHARING=109]="PREMIUM_SHARING",e[e.TEAM_FOLDERS=110]="TEAM_FOLDERS",e[e.GROUPS_STANDARD=111]="GROUPS_STANDARD",e[e.GROUPS_ADVANCED=112]="GROUPS_ADVANCED",e[e.GROUPS_ENTERPRISE=113]="GROUPS_ENTERPRISE"})(t.ProductAddonType||(t.ProductAddonType={}));(function(e){e[e.SPACE_PACK_100G="100G"]="SPACE_PACK_100G",e[e.SPACE_PACK_10T="10T"]="SPACE_PACK_10T",e[e.SPACE_PACK_50T="50T"]="SPACE_PACK_50T",e[e.SPACE_PACK_200T="200T"]="SPACE_PACK_200T",e[e.SPACE_PACK_500T="500T"]="SPACE_PACK_500T",e[e.SPACE_PACK_1000T="1000T"]="SPACE_PACK_1000T",e[e.SPACE_PACK_5000T="5000T"]="SPACE_PACK_5000T"})(t.ProductSpec||(t.ProductSpec={}));(function(e){e[e.EVH=1]="EVH",e[e.EVH_FREE=2]="EVH_FREE",e[e.QUOTA=3]="QUOTA",e[e.LICENSE=4]="LICENSE",e[e.SUPPORT=5]="SUPPORT",e[e.CAPTURE=6]="CAPTURE",e[e.INFINITE=7]="INFINITE",e[e.PREMIUM_SHARING=8]="PREMIUM_SHARING",e[e.TEAM_FOLDERS=9]="TEAM_FOLDERS",e[e.GROUPS=10]="GROUPS",e[e.QUOTA_FREE=11]="QUOTA_FREE"})(t.OfferKind||(t.OfferKind={}));(function(e){e[e.TRIAL_CONVERT=1]="TRIAL_CONVERT"})(t.TransitionKind||(t.TransitionKind={}))}),define("modules/clean/payments/skus/quota_info",["require","exports","modules/clean/display_format"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){}return e.deserialize=function(t){var n=new e;return n.serializedQuotaInfo=t,n},Object.defineProperty(e.prototype,"extrasQuota",{get:function(){return this.serializedQuotaInfo.extrasQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedExtrasQuota",{get:function(){return n.format_bytes(this.extrasQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"licensesQuota",{get:function(){return this.serializedQuotaInfo.licensesQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedLicenseQuota",{get:function(){return n.format_bytes(this.licensesQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planQuota",{get:function(){return this.serializedQuotaInfo.planQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedPlanQuota",{get:function(){return n.format_bytes(this.planQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalQuota",{get:function(){return this.serializedQuotaInfo.totalQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedTotalQuota",{get:function(){return n.format_bytes(this.totalQuota)},enumerable:!0,configurable:!0}),e})();t.QuotaInfo=r}),define("modules/clean/payments/skus/subscription_sku_set",["require","exports","modules/clean/payments/skus/billing_schedule","modules/clean/payments/skus/catalog_sku","modules/clean/payments/skus/catalog_sku_set"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(){this.licenseSkuSet=new a.CatalogSkuSet([]),this.addonSkuSet=new a.CatalogSkuSet([]),this.quantityMap={}}return e.deserialize=function(t){return(new e).deserialize(t)},e.prototype.deserialize=function(e){var t=this;if(e.billingSchedule&&(this.schedule=n.BillingSchedule.deserialize(e.billingSchedule)),e.planSku&&(this.planSku=new r.CatalogSku(e.planSku)),e.licenseSkus){var i=e.licenseSkus.map(function(e){var n=new r.CatalogSku(e.sku);return t.quantityMap[n.code]=e.quantity,n});this.licenseSkuSet=new a.CatalogSkuSet(i)}else this.licenseSkuSet=new a.CatalogSkuSet([]);if(e.addonSkus){var o=e.addonSkus.map(function(e){var n=new r.CatalogSku(e.sku);return t.quantityMap[n.code]=e.quantity,n});this.addonSkuSet=new a.CatalogSkuSet(o)}else this.addonSkuSet=new a.CatalogSkuSet([]);return this},e.prototype.fromSubscriptionSkuSet=function(e){this.schedule=e.schedule,this.planSku=e.plan,this.licenseSkuSet=new a.CatalogSkuSet(e.licenses.skus),this.addonSkuSet=new a.CatalogSkuSet(e.addons.skus);for(var t in e.quantityMap)this.quantityMap[t]=e.quantityMap[t];return this},Object.defineProperty(e.prototype,"allSkus",{get:function(){var e=this.licenses.skus.concat(this.addons.skus);return this.planSku&&e.push(this.planSku),new a.CatalogSkuSet(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plan",{get:function(){return this.planSku},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billingSchedule",{get:function(){return this.schedule},enumerable:!0,configurable:!0}),e.prototype.quantityForSku=function(e){var t=this.quantityMap[e.code];return void 0!==t?t:-1},Object.defineProperty(e.prototype,"licenses",{get:function(){return this.licenseSkuSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalLicenses",{get:function(){var e=this;return this.licenseSkuSet.skus.map(function(t){return e.quantityMap[t.code]}).reduce(function(e,t){return e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addons",{get:function(){return this.addonSkuSet},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){var t=this,n=e.allSkus.skus,r=this.allSkus.skus;return n.length===r.length&&r.every(function(r){return!!n.some(function(e){return e.code===r.code})&&t.quantityForSku(r)===e.quantityForSku(r)})},e.prototype.toJSON=function(){for(var e={},t=0,n=this.licenseSkuSet.skus;t<n.length;t++){var r=n[t];e[r.code]=this.quantityMap[r.code]}for(var a={},i=0,o=this.addonSkuSet.skus;i<o.length;i++){var r=o[i];a[r.code]=this.quantityMap[r.code]}return{addonSkus:a,billingScheduleId:this.billingSchedule?this.billingSchedule.id:void 0,licenseSkus:e,planSku:this.planSku?this.planSku.code:void 0,trialDuration:this.trialDuration}},e})();t.SubscriptionSkuSet=i}),define("modules/clean/payments/skus/subscription_state",["require","exports","tslib","modules/clean/payments/skus/quota_info","modules/clean/payments/skus/subscription_sku_set"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.deserialize=function(e){return(new t).deserialize(e)},t.prototype.deserialize=function(t){return e.prototype.deserialize.call(this,t),this._minLicenseLimitForPlan=t.minLicenseLimitForPlan,this._maxSelfServiceLicenseLimitForPlan=t.maxSelfServiceLicenseLimitForPlan,this._formattedNextBillingDate=t.formattedNextBillingDate,this._isDeactivatedTeam=t.isDeactivatedTeam,t.quotaInfo&&(this.quotaInfo=r.QuotaInfo.deserialize(t.quotaInfo)),this},Object.defineProperty(t.prototype,"minLicenseLimitForPlan",{get:function(){return this._minLicenseLimitForPlan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSelfServiceLicenseLimitForPlan",{get:function(){return this._maxSelfServiceLicenseLimitForPlan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formattedNextBillingDate",{get:function(){return this._formattedNextBillingDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quota",{get:function(){return this.quotaInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDeactivatedTeam",{get:function(){return this._isDeactivatedTeam},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return!!e.prototype.equals.call(this,t)&&this.formattedNextBillingDate===t.formattedNextBillingDate},t})(a.SubscriptionSkuSet);t.SubscriptionState=i}),define("modules/clean/payments/skus/subscription_status",["require","exports","modules/clean/payments/skus/subscription_state","modules/clean/payments/skus/billing_summary"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){return(new e).deserialize(t)},e.prototype.deserialize=function(e){return this._nextBillingSummary=r.BillingSummary.deserialize(e.nextBillingSummary),this._subState=n.SubscriptionState.deserialize(e.subState),e.scheduledSubState&&(this._scheduledSubState=n.SubscriptionState.deserialize(e.scheduledSubState)),this},Object.defineProperty(e.prototype,"subState",{get:function(){return this._subState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduledSubState",{get:function(){return this._scheduledSubState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalSubState",{get:function(){return this.scheduledSubState?this.scheduledSubState:this.subState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnTrial",{get:function(){return!!this.subState.plan&&this.subState.plan.isTrialPlan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedNextBillingDate",{get:function(){return this.subState.formattedNextBillingDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextBillingSummary",{get:function(){return this._nextBillingSummary},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{scheduledSubState:this.scheduledSubState,subState:this.subState}},e})();t.SubscriptionStatus=a}),define("modules/clean/payments/validation",["require","exports"],function(e,t){"use strict";function n(e){return!!s[e]}function r(e,t){return!t.trim().length||!!s[e]&&s[e].regex.test(t)}function a(e){return s[e]?s[e].prefix:""}function i(e){return s[e]?s[e].examples:[]}function o(e){if(e=e.replace(/\s+/g,""),e.length<2)return!1;switch(e.substring(0,2)){case"AT":return/^AT[0-9]{18}$/.test(e);case"BE":return/^BE[0-9]{14}$/.test(e);case"CY":return/^CY[0-9]{10}[0-9a-zA-Z]{16}$/.test(e);case"CZ":return/^CZ[0-9]{22}$/.test(e);case"DE":return/^DE[0-9]{20}$/.test(e);case"EE":return/^EE[0-9]{18}$/.test(e);case"ES":return/^ES[0-9]{22}$/.test(e);case"FI":return/^FI[0-9]{16}$/.test(e);case"FR":return/^FR[0-9]{12}[0-9a-zA-Z]{11}[0-9]{2}$/.test(e);case"GR":return/^GR[0-9]{9}[0-9a-zA-Z]{16}$/.test(e);case"HU":return/^HU[0-9]{26}$/.test(e);case"HR":return/^HR[0-9]{19}$/.test(e);case"IE":return/^IE[0-9]{2}[0-9a-zA-Z]{4}[0-9]{14}$/.test(e);case"IT":return/^IT[0-9]{2}[A-Z]{1}[0-9]{10}[0-9a-zA-Z]{12}$/.test(e);case"LU":return/^LU[0-9]{5}[0-9a-zA-Z]{13}$/.test(e);case"NL":return/^NL[0-9]{2}[A-Z]{4}[0-9]{10}$/.test(e);case"PL":return/^PL[0-9]{26}$/.test(e);case"PT":return/^PT[0-9]{23}$/.test(e);case"SE":return/^SE[0-9]{22}$/.test(e)}return!1}Object.defineProperty(t,"__esModule",{value:!0});var s={AT:{prefix:"AT",regex:/^ATU[0-9]{8}$/,examples:["ATU12345678"]},BE:{prefix:"BE",regex:/^BE(0?|1)[0-9]{9}$/,examples:["BE0123456789","BE1123456789","BE1234567890"]},BG:{prefix:"BG",regex:/^BG[0-9]{9,10}$/,examples:["BG123456789","BG1234567890"]},CH:{prefix:"CH",regex:/^CHE[0-9]{9}(TVA|MWST|IVA)$/,examples:["CHE123456789TVA","CHE123456789MWST","CHE123456789IVA"]},CY:{prefix:"CY",regex:/^CY[0-9]{8}[A-Z]$/,examples:["CY12345678X"]},CZ:{prefix:"CZ",regex:/^CZ[0-9]{8,10}$/,examples:["CZ12345678","CZ123456789","CZ1234567890"]},DE:{prefix:"DE",regex:/^DE[0-9]{9}$/,examples:["DE123456789"]},DK:{prefix:"DK",regex:/^DK[0-9]{8}$/,examples:["DK12345678"]},EE:{prefix:"EE",regex:/^EE[0-9]{9}$/,examples:["EE123456789"]},GR:{prefix:"EL",regex:/^EL[0-9]{9}$/,examples:["EL123456789"]},ES:{prefix:"ES",regex:/^ES([A-Z][0-9]{7}[0-9A-Z]|[0-9A-Z][0-9]{7}[A-Z])$/,examples:["ESX12345678","ES12345678X","ESX1234567X"]},FI:{prefix:"FI",regex:/^FI[0-9]{8}$/,examples:["FI12345678"]},FR:{prefix:"FR",regex:/^FR[0-9A-Z]{2}[0-9]{9}$/,examples:["FR12345678901","FRX1234567890","FR1X123456789","FRXX123456789"]},GB:{prefix:"GB",regex:/^GB([0-9]{9}|[0-9]{12}|GD[0-9]{3}|HA[0-9]{3})$/,examples:["GB123456789","GB123456789012","GBGD123","GBHA123"]},HR:{prefix:"HR",regex:/^HR[0-9]{11}$/,examples:["HR12345678901"]},HU:{prefix:"HU",regex:/^HU[0-9]{8}$/,examples:["HU12345678"]},IE:{prefix:"IE",regex:/^IE([0-9][0-9A-Z+*][0-9]{5}[A-Z]{1,2}|[0-9]{7}WI)$/,examples:["IE1X23456X","IE1X23456X","IE1234567XX"]},IT:{prefix:"IT",regex:/^IT[0-9]{11}$/,examples:["IT12345678901"]},LT:{prefix:"LT",regex:/^LT([0-9]{9}|[0-9]{12})$/,examples:["LT123456789","LT123456789012"]},LU:{prefix:"LU",regex:/^LU[0-9]{8}$/,examples:["LU12345678"]},LV:{prefix:"LV",regex:/^LV[0-9]{11}$/,examples:["LV12345678901"]},MT:{prefix:"MT",regex:/^MT[0-9]{8}$/,examples:["MT12345678"]},NL:{prefix:"NL",regex:/^NL[0-9]{9}B[0-9]{2}$/,examples:["NL123456789B01"]},NO:{prefix:"NO",regex:/^NO[0-9]{9}(MVA)?$/,examples:["NO123456789","NO123456789MVA"]},PL:{prefix:"PL",regex:/^PL[0-9]{10}$/,examples:["PL1234567890"]},PT:{prefix:"PT",regex:/^PT[0-9]{9}$/,examples:["PT123456789"]},RO:{prefix:"RO",regex:/^RO[0-9]{2,10}$/,examples:["RO12","RO1234567890"]},SE:{prefix:"SE",regex:/^SE[0-9]{12}$/,examples:["SE123456789012"]},SI:{prefix:"SI",regex:/^SI[0-9]{8}$/,examples:["SI12345678"]},SK:{prefix:"SK",regex:/^SK[0-9]{10}$/,examples:["SK1234567890"]}};t.hasVat=n,t.validateVat=r,t.getVatPrefix=a,t.getVatExamples=i,t.validIBANForCountry=o}),define("modules/clean/react/arbor/elements/arbor_inputs",["require","exports","tslib","external/react","external/classnames","modules/clean/react/css"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=a({input__label:!0,"input__label--before":Boolean(this.props.labelBeforeElement)},this.props.className),t=a({"input__label-container":!0},this.props.containerClassName),n=a({"input__label-input-map":!0,"input__label-input-map--stack":Boolean(this.props.labelBeforeElement)}),i=a({"input__label--error":!0}),o=r.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),s=null;this.props.labelBeforeElement&&(s=o,o=null);var c=null;return this.props.errorText&&this.props.showError&&(c=r.createElement("label",{className:i,htmlFor:this.props.htmlFor},this.props.errorText)),r.createElement("div",{className:t},r.createElement("div",{className:n},s,this.props.children,o),c)},t})(r.Component);t.ArborLabeledInput=o;var s=(function(e){function t(){var t=e.call(this)||this;return t.handleOnChange=t.handleOnChange.bind(t),t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({isValid:this.props.isValid,value:this.props.value})},t.prototype.componentWillReceiveProps=function(e){this.props.isValid!==e.isValid&&this.setState({isValid:e.isValid})},t.prototype.handleOnChange=function(e){var t=e.target;if(this.props.validateHandler){var n=this.props.validateHandler(e,t.value);n||e.preventDefault(),this.setState({isValid:n})}this.setState({value:t.value}),this.props.onChange&&this.props.onChange(e,t.name,t.value)},t.prototype.renderInput=function(){var e=this.props,t=e.name,n=e.id,i=e.disabled,o=e.placeholderText,s=e.pattern,c=this.props.type||"text",l=a({input__text:!0,"input__text--error":this.state.isValid===!1,"input__text--valid":this.state.isValid===!0},this.props.className);return r.createElement("input",{className:l,type:c,name:t,id:n,value:this.state.value,pattern:s,placeholder:o,disabled:i,onChange:this.handleOnChange})},t.prototype.render=function(){var e=this.props,t=e.name,n=e.labelText,a=e.errorText,i=e.labelClassName,s=e.containerClassName;return r.createElement(o,{className:i,containerClassName:s,labelText:n,htmlFor:t,showError:this.state.isValid===!1,errorText:a,labelBeforeElement:!0},this.renderInput())},t})(r.Component);t.ArborTextInputElement=s,t.ArborTextInput=i(s,["/static/css/arbor/elements/inputs-vflgeviox.css"]);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.renderInput=function(){var e=this.props,t=e.name,n=e.id,i=e.disabled,o=e.value,s=e.placeholderText,c=a({input__text:!0,"input__text--error":this.state.isValid===!1,"input__text--valid":this.state.isValid===!0},this.props.className);return r.createElement("textarea",{className:c,name:t,id:n,value:o,placeholder:s,disabled:i,onChange:this.handleOnChange})},t})(s);t.ArborTextAreaElement=c,t.ArborTextArea=i(c,["/static/css/arbor/elements/inputs-vflgeviox.css"]);var l=(function(e){function t(){var t=e.call(this)||this;return t.handleCheckboxClick=t.handleCheckboxClick.bind(t),t}return n.__extends(t,e),t.prototype.handleCheckboxClick=function(e){if(this.props.disabled)return void e.stopPropagation();this.props.onClick&&this.props.onClick(e,this.props.name,this.props.checked)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.disabled,i=e.required,s=e.checked,c=e.onChange,l=e.errorText,u=e.labelText,d=a({input__checkbox:!0,"input__checkbox--valid":s,"input__checkbox--disabled":Boolean(n)},this.props.className),p=a(this.props.labelClassName);return r.createElement(o,{className:p,labelText:u,htmlFor:t,showError:i&&!s,errorText:l},r.createElement("div",{className:d,onClick:this.handleCheckboxClick,tabIndex:0}),r.createElement("input",{ref:"checkbox",type:"checkbox","aria-checked":s,name:t,id:t,checked:s,onChange:c,disabled:n}))},t})(r.Component);t.ArborCheckboxInputElement=l,t.ArborCheckboxInput=i(l,["/static/css/arbor/elements/inputs-vflgeviox.css"]);var u=(function(e){function t(){var t=e.call(this)||this;return t.handleRadioClick=t.handleRadioClick.bind(t),t}return n.__extends(t,e),t.prototype.handleRadioClick=function(e){if(this.props.disabled)return void e.stopPropagation();this.props.onClick&&this.props.onClick(e,this.props.name,this.props.value)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.disabled,i=e.required,s=e.value,c=e.checked,l=e.onChange,u=e.errorText,d=e.labelText,p=a({input__radio:!0,"input__radio--valid":Boolean(c),"input__radio--disabled":Boolean(n)},this.props.className),_=a(this.props.labelClassName);return r.createElement(o,{className:_,labelText:d,htmlFor:t,showError:i&&!s,errorText:u,containerClassName:"input__label-container--row"},r.createElement("div",{"aria-label":t,tabIndex:0,className:p,onClick:this.handleRadioClick}),r.createElement("input",{ref:"radio",type:"radio",name:t,id:t,value:s,checked:c,onChange:l,disabled:n}))},t})(r.Component);t.ArborRadioInputElement=u,t.ArborRadioInput=i(u,["/static/css/arbor/elements/inputs-vflgeviox.css"]);var d=(function(e){function t(){var t=e.call(this)||this;return t.handleSelectChange=t.handleSelectChange.bind(t),t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({isValid:this.props.isValid})},t.prototype.componentWillReceiveProps=function(e){this.props.isValid!==e.isValid&&this.setState({isValid:e.isValid})},t.prototype.handleSelectChange=function(e){if(this.props.disabled)return void e.stopPropagation();var t=e.target;if(this.props.validateHandler){var n=this.props.validateHandler(e,t.value);n||e.preventDefault(),this.setState({isValid:n})}if(this.props.onChange){var r=e.currentTarget;this.props.onChange(e,this.props.name,r.value)}},t.prototype.render=function(){var e=this.props,t=e.name,n=e.labelClassName,i=e.className,s=e.labelText,c=e.disabled,l=e.errorText,u=a({input__select:!0},i);return r.createElement(o,{className:n,errorText:l,htmlFor:t,labelBeforeElement:!0,labelText:s,showError:this.state.isValid===!1},r.createElement("select",{className:u,id:t,name:t,disabled:c,onChange:this.handleSelectChange,value:this.props.value},this.props.children))},t})(r.Component);t.ArborSelectInputElement=d,t.ArborSelectInput=i(d,["/static/css/arbor/elements/inputs-vflgeviox.css"])}),define("modules/clean/teams/admin/lib/billing_history",["require","exports","modules/clean/teams/admin/types/billing_history"],function(e,t,n){"use strict";function r(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];if(r<e.length-1){var i=e[r+1];if(a.type===n.BillingRowType.Payment&&i.type===n.BillingRowType.Invoice&&(i.billed===a.paid||i.billed==="("+a.paid+")")&&i.date===a.date){var o={id:r,invoice:i,payment:a};t.push(o),r++;continue}}a.type===n.BillingRowType.Payment?t.push({id:r,payment:a}):t.push({id:r,invoice:a})}return t}function a(e,n){void 0===n&&(n=t.SelectedYearTypes.ALL_TIME);var a=r(e),i=(new Date).getFullYear().toString();return n===t.SelectedYearTypes.ALL_TIME||(a=n===t.SelectedYearTypes.YEAR_TO_DATE?a.filter(function(e){return e.payment?e.payment.date.indexOf(i)!==-1:!!e.invoice&&e.invoice.date.indexOf(i)!==-1}):a.filter(function(e){return e.payment?e.payment.date.indexOf(n)!==-1:!!e.invoice&&e.invoice.date.indexOf(n)!==-1})),a=a.filter(function(e){return e.invoice&&null!==e.invoice.description||e.payment&&null!==e.payment.description})}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedYearTypes={ALL_TIME:"all-time",YEAR_TO_DATE:"year-to-date"},t.getHistoryData=a}),define("modules/clean/teams/admin/types/billing_history",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.Invoice=0]="Invoice",e[e.Payment=1]="Payment",e[e.Legacy=2]="Legacy"})(t.BillingRowType||(t.BillingRowType={}))}),define("modules/clean/teams/admin/widgets/billing_history/billing_history_row",["require","exports","tslib","external/react","modules/core/i18n","modules/clean/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal_loader"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;(function(e){e[e.invoice=0]="invoice",e[e.receipt=1]="receipt"})(o||(o={}));var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEdit=function(){var e=t.props.row;e.invoice&&i.EditInvoiceAddressModalLoader.showInstance(e.invoice)},t}return n.__extends(t,e),t.prototype.renderCombinedRecords=function(e,t){var n=this.props.showEditInvoiceModal,i=null,o=null;e.voidedOn||t.voidedOn?(i=r.createElement("span",{className:"row-content__price--line-through"},e.billed),o=r.createElement("span",null," (",a._("Voided"),")")):i=r.createElement("span",null,e.billed);var s,c,l;e.link&&(s=r.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},a._("Invoice"))),t.link&&(c=r.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},a._("Receipt"))),n&&!e.isOpen&&(l=r.createElement("button",{className:"button-as-link",onClick:this.onEdit},a._("Edit")));var u=r.createElement("td",{className:"row-content__links"},r.createElement("span",null,s,c,l)),d=r.createElement("div",null,r.createElement("p",{className:"description-line"},r.createElement("span",null,e.description),o));return r.createElement("tr",{className:"row-content"},r.createElement("td",{className:"row-content__date"},e.date),r.createElement("td",{className:"row-content__description"},d),u,r.createElement("td",{className:"row-content__price"},i))},t.prototype.renderSingleRecord=function(e,t){var n=this.props.showEditInvoiceModal,i=null;e.voidedOn&&(i=r.createElement("span",null," (",a._("Voided"),")"));var s=null;if(e.link){var c=a._("Receipt");t===o.invoice&&(c=a._("Invoice"),n&&!e.isOpen&&r.createElement("button",{className:"button-as-link",onClick:this.onEdit},a._("Edit"))),s=r.createElement("td",{className:"row-content__links"},r.createElement("span",null,r.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},c)))}else s=r.createElement("td",{className:"row-content__links"});var l=r.createElement("div",null,r.createElement("p",{className:"description-line"},r.createElement("span",null,e.description),i)),u=t===o.receipt?e.paid:e.billed;return r.createElement("tr",{className:"row-content"},r.createElement("td",{className:"row-content__date"},e.date),r.createElement("td",{className:"row-content__description"},l),s,r.createElement("td",{className:"row-content__price"},u))},t.prototype.render=function(){var e=this.props.row;return e.payment&&e.invoice?this.renderCombinedRecords(e.invoice,e.payment):e.payment?this.renderSingleRecord(e.payment,o.receipt):e.invoice?this.renderSingleRecord(e.invoice,o.invoice):r.createElement("noscript",null)},t})(r.Component);t.BillingHistoryTableRow=s}),define("modules/clean/teams/admin/widgets/billing_history/billing_history_table",["require","exports","tslib","external/react","modules/core/i18n","modules/clean/teams/admin/widgets/billing_history/billing_history_row"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.buildFooterIfNecessary=function(){if(null!==this.props.footer)return r.createElement("tfoot",{className:"row-footer"},this.props.footer)},t.prototype.render=function(){var e,t=this.props,n=t.amountLabel,o=t.displayNoTransactionsOnEmptyRecords,s=t.showEditInvoiceModal,c=this.props.billingHistoryRecords,l=n?n:a._("Price");return o&&0===c.length&&(e=r.createElement("tr",null,r.createElement("td",null),r.createElement("td",{className:"row-content__description"},a._("No transactions")),r.createElement("td",null))),r.createElement("div",null,r.createElement("table",{className:"billing-history-table",cellSpacing:"0"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"row-header date-row u-font-meta"},a._("Date")),r.createElement("th",{className:"row-header desc-row u-font-meta",colSpan:2},a._("Description")),r.createElement("th",{className:"row-header price-row u-font-meta"},l))),this.buildFooterIfNecessary(),r.createElement("tbody",null,e,c.map(function(e,t){return r.createElement(i.BillingHistoryTableRow,{row:e,key:e.id,showEditInvoiceModal:s})}))))},t})(r.Component);t.BillingHistoryTable=o}),define("modules/clean/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal_loader",["require","exports","tslib","modules/core/notify","external/react","modules/clean/react/css","modules/clean/react/sprite","modules/core/uri","modules/core/i18n","modules/clean/react/arbor/elements/arbor_inputs","modules/clean/payments/validation","modules/clean/react/modal","modules/clean/static_urls","modules/clean/react/tooltip","modules/clean/analytics","modules/clean/ajax_as_promised"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,_,m,f){"use strict";function h(e){return function(t){return null==t||t.length<=e}}function y(e,t){return a.createElement(_.Tooltip,{position:_.TooltipPosition.RIGHT,tooltip_contents:t},e,a.createElement(o,{group:"teams",name:"info_active",alt:"",className:"info-sprite"}))}Object.defineProperty(t,"__esModule",{value:!0});var b=c._("Country and postal code must match your account’s payment information."),g=c._("To change your tax rate on this invoice, contact support."),v={addressName:c._("Billing name"),address:c._("Billing address"),city:c._("City"),state:c._("State"),zip:y(c._("Postal code"),b),country:y(c._("Country"),b),exclusionId:y(c._("VAT number (optional)"),g)},E=(function(e){function i(){var t=e.call(this)||this;return t.disableds={addressName:!1,address:!1,city:!1,state:!1,zip:!0,country:!0,exclusionId:!1},t.validateHandlers={addressName:h(100),address:h(250),city:h(50),state:h(50),zip:function(){return!0},country:function(){return!0},exclusionId:function(){return!0}},t.errorTexts={addressName:c._("Too long"),address:c._("Too long"),city:c._("Too long"),state:c._("Too long"),zip:"",country:"",exclusionId:""},t.onSave=function(){var e=t.state.formState,n=t.props.invoice;if(e)if(m.TeamsWebActionsLogger.log("edit_billing_address_started",null,null,null,!1),t.setState({submitting:!0}),t.isInputValid()){var r={address_name:e.addressName,address:e.address,city:e.city,state:e.state,exclusion_id:e.exclusionId};n&&(r.invoice_id=s.parse(n.link).getQuery().id.toString()),t.makeEditBillingAddressRequest(r)}else t.setState({submitting:!1,showErrors:!0})},t.onCancel=function(){m.TeamsWebActionsLogger.log("edit_billing_address_cancelled",null,null,null,!1),d.Modal.close()},t.state={submitting:!1,showErrors:!1},t}return n.__extends(i,e),i.showInstance=function(e){var n=a.createElement(t.EditInvoiceAddressModalLoader,{invoice:e});d.Modal.showInstance(n)},i.showUpdateTaxProfileModal=function(){var e=a.createElement(t.EditInvoiceAddressModalLoader,null);d.Modal.showInstance(e)},i.prototype.componentDidMount=function(){var e=void 0;this.props.invoice&&(e=s.parse(this.props.invoice.link).getQuery().id.toString(),this.disableds.exclusionId=!0),this.makeRequest(e)},i.prototype.makeRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,a;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t={invoice_id:e},[4,f.WebRequest({url:"/edit_billing_address_view_model",data:t,dataType:"json"})];case 1:return r=n.sent(),u.hasVat(r.countryCode)&&(this.errorTexts.exclusionId=c._("Please enter a valid VAT number, e.g. %(examples)s.").format({examples:u.getVatExamples(r.countryCode).join(", ")}),this.validateHandlers.exclusionId=function(e){return!e||u.validateVat(r.countryCode,e)}),this.setState({formState:r}),[3,3];case 2:return a=n.sent(),d.Modal.close(),[3,3];case 3:return[2]}})})},i.prototype.render=function(){var e,t=this.state,n=t.formState,r=t.showErrors,i=t.submitting;if(n){var o=null;u.hasVat(n.countryCode)&&(o=this.renderInput("exclusionId","grid__item--1-1")),e=a.createElement("div",{className:".type--arbor grid__container grid__container--p-large  grid--x-bookend"},this.renderInstructions(n.countryCode),this.renderInput("addressName","grid__item--1-1"),this.renderInput("address","grid__item--1-1"),this.renderInput("city","grid__item--1-2"),this.renderInput("state","grid__item--11-24"),this.renderInput("zip","grid__item--7-24"),this.renderInput("country","grid__item--2-3"),o)}else e=a.createElement("div",{className:"loading-spinner"},a.createElement("img",{src:p.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),alt:c._("Loading")}));var s=a.createElement(d.ModalButtons,{className:"oq-modal__buttons"},a.createElement(d.ModalButton,{disabled:!n||i||r&&!this.isInputValid(),importance:"primary",onClick:this.onSave},"Save changes"),a.createElement(d.ModalButton,{className:"cancel-button",importance:"tertiary",onClick:this.onCancel},"Cancel"));return a.createElement(d.Modal,{className:"edit-invoice-modal",autoClose:!1,buttonComponent:s,title:c._("Edit Invoice Details")},a.createElement("div",{className:"dynamic-content"},e))},i.prototype.makeEditBillingAddressRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,f.WebRequest({url:"/edit_billing_address",data:e})];case 1:return n.sent(),m.TeamsWebActionsLogger.log("edit_billing_address_success",null,null,null,!1),r.success(c._("Invoice address updated.")),[3,4];case 2:return t=n.sent(),m.TeamsWebActionsLogger.log("edit_billing_address_edit_failure",null,null,null,!1),[3,4];case 3:return d.Modal.close(),[7];case 4:return[2]}})})},i.prototype.renderInstructions=function(e){var t,n=this.props.invoice;if(n){var r=[c._("You are editing details for the %(date)s invoice.").format({date:n.date})];u.hasVat(e)&&r.push(c._("To add or change a VAT number or request a tax refund, contact support.")),t=r.join(" ")}else t=c._("You are editing details for all future invoices. To edit past invoices,         click “Edit” on the invoice item instead.");return a.createElement("div",{className:"grid__item--1-1"},t)},i.prototype.renderInput=function(e,t){var n=this.state,r=n.formState,i=n.showErrors,o="";return r&&(o=r[e]),a.createElement(l.ArborTextInput,{name:e,containerClassName:t,isValid:i?!!this.validateHandlers[e](o)&&"":"",labelText:v[e],errorText:this.errorTexts[e],value:o,onChange:this.onChangeFactory(e),disabled:this.disableds[e]})},i.prototype.onChangeFactory=function(e){var t=this;return function(n,r,a){var i=t.state.formState;i&&t.setState(function(t){return i[e]=a,t})}},i.prototype.isInputValid=function(){var e=this.state.formState;return!!e&&(this.validateHandlers.addressName(e.addressName)&&this.validateHandlers.address(e.address)&&this.validateHandlers.city(e.city)&&this.validateHandlers.state(e.state)&&this.validateHandlers.exclusionId(e.exclusionId))},i})(a.Component);t.EditInvoiceAddressModalLoader=i(E,["/static/css/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal-vflbX95qo.css"])});
//# sourceMappingURL=pkg-account_pagelet.min.js-vfl8PgO9E.map