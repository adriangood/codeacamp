define(["require","exports","external/underscore","modules/clean/api_v2/root_aware_client"],function(e,t,i,r){"use strict";function n(e,t,i,r){return".tag"===t?0===r?["type",i]:i in e?i:[null,i]:i}function s(e,t,i,r){return"string"==typeof i&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(i)?new Date(i):i}function c(e,t,r){return void 0===r&&(r=0),Array.isArray(e)?e.map(function(e){return c(e,t,r+1)}):i.isObject(e)?Object.keys(e).reduce(function(n,s){var a=e[s];if(Array.isArray(a)||i.isObject(a))n[s]=c(a,t,r+1);else{var u=t(e,s,a,r);if(Array.isArray(u)){if(null===u[0])return u[1];n[u[0]]=u[1]}else n[s]=u}return n},{}):t(null,"",e,r)}function a(e){return c(c(e,n),s)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActivity=a;var u=(function(){function e(e){this.userId=e,this.client=new r.ApiV2RootAwareClient}return e.prototype.getActivityStream=function(e){return this.client.rpc(this.userId,"file_activity_stream/get_activity_stream",{file_id:e}).then(function(e){return{enabled:e.enabled,activity:e.activity.map(a)}})},e.prototype.sendFeedback=function(e,t,i,r,n){this.client.rpc(this.userId,"file_activity_stream/feedback",{feedback:e,file_preview_session_id:t,file_viewer_session_id:i,file_ns_id:r,file_sjid:n})},e})();t.FileActivityStreamApi=u});
//# sourceMappingURL=api.min.js-vflleU6fE.map